/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */
"use strict";var ort=(()=>{var br=Object.defineProperty;var Xa=Object.getOwnPropertyDescriptor;var Qa=Object.getOwnPropertyNames;var Za=Object.prototype.hasOwnProperty;var W=(n,r)=>()=>(n&&(r=n(n=0)),r);var ft=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),lt=(n,r)=>{for(var t in r)br(n,t,{get:r[t],enumerable:!0})},Ka=(n,r,t,u)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Qa(r))!Za.call(n,a)&&a!==t&&br(n,a,{get:()=>r[a],enumerable:!(u=Xa(r,a))||u.enumerable});return n};var Xe=n=>Ka(br({},"__esModule",{value:!0}),n);var Gt,Qe,ct,eo,$t,zt=W(()=>{"use strict";Gt=new Map,Qe=[],ct=(n,r,t)=>{if(r&&typeof r.init=="function"&&typeof r.createInferenceSessionHandler=="function"){let u=Gt.get(n);if(u===void 0)Gt.set(n,{backend:r,priority:t});else{if(u.priority>t)return;if(u.priority===t&&u.backend!==r)throw new Error(`cannot register backend "${n}" using priority ${t}`)}if(t>=0){let a=Qe.indexOf(n);a!==-1&&Qe.splice(a,1);for(let d=0;d<Qe.length;d++)if(Gt.get(Qe[d]).priority<=t){Qe.splice(d,0,n);return}Qe.push(n)}return}throw new TypeError("not a valid backend")},eo=async n=>{let r=Gt.get(n);if(!r)return"backend not found.";if(r.initialized)return r.backend;if(r.aborted)return r.error;{let t=!!r.initPromise;try{return t||(r.initPromise=r.backend.init(n)),await r.initPromise,r.initialized=!0,r.backend}catch(u){return t||(r.error=`${u}`,r.aborted=!0),r.error}finally{delete r.initPromise}}},$t=async n=>{let r=n.executionProviders||[],t=r.map(m=>typeof m=="string"?m:m.name),u=t.length===0?Qe:t,a,d=[],f=new Set;for(let m of u){let h=await eo(m);typeof h=="string"?d.push({name:m,err:h}):(a||(a=h),a===h&&f.add(m))}if(!a)throw new Error(`no available backend found. ERR: ${d.map(m=>`[${m.name}] ${m.err}`).join(", ")}`);for(let{name:m,err:h}of d)t.includes(m)&&console.warn(`removing requested execution provider "${m}" from session options because it is not available: ${h}`);let s=r.filter(m=>f.has(typeof m=="string"?m:m.name));return[a,new Proxy(n,{get:(m,h)=>h==="executionProviders"?s:Reflect.get(m,h)})]}});var On=W(()=>{"use strict";zt()});var vn,Tn=W(()=>{"use strict";vn="1.18.0"});var _n,ve,Or=W(()=>{"use strict";Tn();_n="warning",ve={wasm:{},webgl:{},webgpu:{},versions:{common:vn},set logLevel(n){if(n!==void 0){if(typeof n!="string"||["verbose","info","warning","error","fatal"].indexOf(n)===-1)throw new Error(`Unsupported logging level: ${n}`);_n=n}},get logLevel(){return _n}};Object.defineProperty(ve,"logLevel",{enumerable:!0})});var Y,En=W(()=>{"use strict";Or();Y=ve});var Sn,An,Mn=W(()=>{"use strict";Sn=(n,r)=>{let t=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);t.width=n.dims[3],t.height=n.dims[2];let u=t.getContext("2d");if(u!=null){let a,d;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(a=n.dims[2],d=n.dims[3]):(a=n.dims[3],d=n.dims[2]);let f=r?.format!==void 0?r.format:"RGB",s=r?.norm,m,h;s===void 0||s.mean===void 0?m=[255,255,255,255]:typeof s.mean=="number"?m=[s.mean,s.mean,s.mean,s.mean]:(m=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(m[3]=s.mean[3])),s===void 0||s.bias===void 0?h=[0,0,0,0]:typeof s.bias=="number"?h=[s.bias,s.bias,s.bias,s.bias]:(h=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(h[3]=s.bias[3]));let y=d*a,O=0,b=y,M=y*2,P=-1;f==="RGBA"?(O=0,b=y,M=y*2,P=y*3):f==="RGB"?(O=0,b=y,M=y*2):f==="RBG"&&(O=0,M=y,b=y*2);for(let A=0;A<d;A++)for(let S=0;S<a;S++){let B=(n.data[O++]-h[0])*m[0],L=(n.data[b++]-h[1])*m[1],k=(n.data[M++]-h[2])*m[2],$=P===-1?255:(n.data[P++]-h[3])*m[3];u.fillStyle="rgba("+B+","+L+","+k+","+$+")",u.fillRect(S,A,1,1)}if("toDataURL"in t)return t.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},An=(n,r)=>{let t=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),u;if(t!=null){let a,d,f;r?.tensorLayout!==void 0&&r.tensorLayout==="NHWC"?(a=n.dims[2],d=n.dims[1],f=n.dims[3]):(a=n.dims[3],d=n.dims[2],f=n.dims[1]);let s=r!==void 0&&r.format!==void 0?r.format:"RGB",m=r?.norm,h,y;m===void 0||m.mean===void 0?h=[255,255,255,255]:typeof m.mean=="number"?h=[m.mean,m.mean,m.mean,m.mean]:(h=[m.mean[0],m.mean[1],m.mean[2],255],m.mean[3]!==void 0&&(h[3]=m.mean[3])),m===void 0||m.bias===void 0?y=[0,0,0,0]:typeof m.bias=="number"?y=[m.bias,m.bias,m.bias,m.bias]:(y=[m.bias[0],m.bias[1],m.bias[2],0],m.bias[3]!==void 0&&(y[3]=m.bias[3]));let O=d*a;if(r!==void 0&&(r.format!==void 0&&f===4&&r.format!=="RGBA"||f===3&&r.format!=="RGB"&&r.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let b=4,M=0,P=1,A=2,S=3,B=0,L=O,k=O*2,$=-1;s==="RGBA"?(B=0,L=O,k=O*2,$=O*3):s==="RGB"?(B=0,L=O,k=O*2):s==="RBG"&&(B=0,k=O,L=O*2),u=t.createImageData(a,d);for(let j=0;j<d*a;M+=b,P+=b,A+=b,S+=b,j++)u.data[M]=(n.data[B++]-y[0])*h[0],u.data[P]=(n.data[L++]-y[1])*h[1],u.data[A]=(n.data[k++]-y[2])*h[2],u.data[S]=$===-1?255:(n.data[$++]-y[3])*h[3]}else throw new Error("Can not access image data");return u}});var vr,Cn,Pn,Rn,xn,In=W(()=>{"use strict";jt();vr=(n,r)=>{if(n===void 0)throw new Error("Image buffer must be defined");if(r.height===void 0||r.width===void 0)throw new Error("Image height and width must be defined");if(r.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:t,width:u}=r,a=r.norm??{mean:255,bias:0},d,f;typeof a.mean=="number"?d=[a.mean,a.mean,a.mean,a.mean]:d=[a.mean[0],a.mean[1],a.mean[2],a.mean[3]??255],typeof a.bias=="number"?f=[a.bias,a.bias,a.bias,a.bias]:f=[a.bias[0],a.bias[1],a.bias[2],a.bias[3]??0];let s=r.format!==void 0?r.format:"RGBA",m=r.tensorFormat!==void 0&&r.tensorFormat!==void 0?r.tensorFormat:"RGB",h=t*u,y=m==="RGBA"?new Float32Array(h*4):new Float32Array(h*3),O=4,b=0,M=1,P=2,A=3,S=0,B=h,L=h*2,k=-1;s==="RGB"&&(O=3,b=0,M=1,P=2,A=-1),m==="RGBA"?k=h*3:m==="RBG"?(S=0,L=h,B=h*2):m==="BGR"&&(L=0,B=h,S=h*2);for(let j=0;j<h;j++,b+=O,P+=O,M+=O,A+=O)y[S++]=(n[b]+f[0])/d[0],y[B++]=(n[M]+f[1])/d[1],y[L++]=(n[P]+f[2])/d[2],k!==-1&&A!==-1&&(y[k++]=(n[A]+f[3])/d[3]);return m==="RGBA"?new ge("float32",y,[1,4,t,u]):new ge("float32",y,[1,3,t,u])},Cn=async(n,r)=>{let t=typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement,u=typeof ImageData<"u"&&n instanceof ImageData,a=typeof ImageBitmap<"u"&&n instanceof ImageBitmap,d=typeof n=="string",f,s=r??{},m=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},h=y=>y instanceof HTMLCanvasElement||y instanceof OffscreenCanvas?y.getContext("2d"):null;if(t){let y=m();y.width=n.width,y.height=n.height;let O=h(y);if(O!=null){let b=n.height,M=n.width;if(r!==void 0&&r.resizedHeight!==void 0&&r.resizedWidth!==void 0&&(b=r.resizedHeight,M=r.resizedWidth),r!==void 0){if(s=r,r.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=b,s.width=M}else s.tensorFormat="RGBA",s.height=b,s.width=M;O.drawImage(n,0,0),f=O.getImageData(0,0,M,b).data}else throw new Error("Can not access image data")}else if(u){let y,O;if(r!==void 0&&r.resizedWidth!==void 0&&r.resizedHeight!==void 0?(y=r.resizedHeight,O=r.resizedWidth):(y=n.height,O=n.width),r!==void 0&&(s=r),s.format="RGBA",s.height=y,s.width=O,r!==void 0){let b=m();b.width=O,b.height=y;let M=h(b);if(M!=null)M.putImageData(n,0,0),f=M.getImageData(0,0,O,y).data;else throw new Error("Can not access image data")}else f=n.data}else if(a){if(r===void 0)throw new Error("Please provide image config with format for Imagebitmap");let y=m();y.width=n.width,y.height=n.height;let O=h(y);if(O!=null){let b=n.height,M=n.width;return O.drawImage(n,0,0,M,b),f=O.getImageData(0,0,M,b).data,s.height=b,s.width=M,vr(f,s)}else throw new Error("Can not access image data")}else{if(d)return new Promise((y,O)=>{let b=m(),M=h(b);if(!n||!M)return O();let P=new Image;P.crossOrigin="Anonymous",P.src=n,P.onload=()=>{b.width=P.width,b.height=P.height,M.drawImage(P,0,0,b.width,b.height);let A=M.getImageData(0,0,b.width,b.height);s.height=b.height,s.width=b.width,y(vr(A.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(f!==void 0)return vr(f,s);throw new Error("Input data provided is not supported - aborted tensor creation")},Pn=(n,r)=>{let{width:t,height:u,download:a,dispose:d}=r,f=[1,u,t,4];return new ge({location:"texture",type:"float32",texture:n,dims:f,download:a,dispose:d})},Rn=(n,r)=>{let{dataType:t,dims:u,download:a,dispose:d}=r;return new ge({location:"gpu-buffer",type:t??"float32",gpuBuffer:n,dims:u,download:a,dispose:d})},xn=(n,r,t)=>new ge({location:"cpu-pinned",type:n,data:r,dims:t??[r.length]})});var Ze,St,Dn,Un,Bn=W(()=>{"use strict";Ze=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),St=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Dn=!1,Un=()=>{if(!Dn){Dn=!0;let n=typeof BigInt64Array<"u"&&BigInt64Array.from,r=typeof BigUint64Array<"u"&&BigUint64Array.from,t=typeof Float16Array<"u"&&Float16Array.from;n&&(Ze.set("int64",BigInt64Array),St.set(BigInt64Array,"int64")),r&&(Ze.set("uint64",BigUint64Array),St.set(BigUint64Array,"uint64")),t?(Ze.set("float16",Float16Array),St.set(Float16Array,"float16")):Ze.set("float16",Uint16Array)}}});var Fn,kn,Ln=W(()=>{"use strict";jt();Fn=n=>{let r=1;for(let t=0;t<n.length;t++){let u=n[t];if(typeof u!="number"||!Number.isSafeInteger(u))throw new TypeError(`dims[${t}] must be an integer, got: ${u}`);if(u<0)throw new RangeError(`dims[${t}] must be a non-negative integer, got: ${u}`);r*=u}return r},kn=(n,r)=>{switch(n.location){case"cpu":return new ge(n.type,n.data,r);case"cpu-pinned":return new ge({location:"cpu-pinned",data:n.data,type:n.type,dims:r});case"texture":return new ge({location:"texture",texture:n.texture,type:n.type,dims:r});case"gpu-buffer":return new ge({location:"gpu-buffer",gpuBuffer:n.gpuBuffer,type:n.type,dims:r});default:throw new Error(`tensorReshape: tensor location ${n.location} is not supported`)}}});var ge,jt=W(()=>{"use strict";Mn();In();Bn();Ln();ge=class{constructor(r,t,u){Un();let a,d;if(typeof r=="object"&&"location"in r)switch(this.dataLocation=r.location,a=r.type,d=r.dims,r.location){case"cpu-pinned":{let s=Ze.get(a);if(!s)throw new TypeError(`unsupported type "${a}" to create tensor from pinned buffer`);if(!(r.data instanceof s))throw new TypeError(`buffer should be of type ${s.name}`);this.cpuData=r.data;break}case"texture":{if(a!=="float32")throw new TypeError(`unsupported type "${a}" to create tensor from texture`);this.gpuTextureData=r.texture,this.downloader=r.download,this.disposer=r.dispose;break}case"gpu-buffer":{if(a!=="float32"&&a!=="float16"&&a!=="int32"&&a!=="int64"&&a!=="uint32"&&a!=="uint8"&&a!=="bool")throw new TypeError(`unsupported type "${a}" to create tensor from gpu buffer`);this.gpuBufferData=r.gpuBuffer,this.downloader=r.download,this.disposer=r.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let s,m;if(typeof r=="string")if(a=r,m=u,r==="string"){if(!Array.isArray(t))throw new TypeError("A string tensor's data must be a string array.");s=t}else{let h=Ze.get(r);if(h===void 0)throw new TypeError(`Unsupported tensor type: ${r}.`);if(Array.isArray(t)){if(r==="float16"&&h===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");r==="uint64"||r==="int64"?s=h.from(t,BigInt):s=h.from(t)}else if(t instanceof h)s=t;else throw new TypeError(`A ${a} tensor's data must be type of ${h}`)}else if(m=t,Array.isArray(r)){if(r.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let h=typeof r[0];if(h==="string")a="string",s=r;else if(h==="boolean")a="bool",s=Uint8Array.from(r);else throw new TypeError(`Invalid element type of data array: ${h}.`)}else{let h=St.get(r.constructor);if(h===void 0)throw new TypeError(`Unsupported type for tensor data: ${r.constructor}.`);a=h,s=r}if(m===void 0)m=[s.length];else if(!Array.isArray(m))throw new TypeError("A tensor's dims must be a number array");d=m,this.cpuData=s,this.dataLocation="cpu"}let f=Fn(d);if(this.cpuData&&f!==this.cpuData.length)throw new Error(`Tensor's size(${f}) does not match data length(${this.cpuData.length}).`);this.type=a,this.dims=d,this.size=f}static async fromImage(r,t){return Cn(r,t)}static fromTexture(r,t){return Pn(r,t)}static fromGpuBuffer(r,t){return Rn(r,t)}static fromPinnedBuffer(r,t,u){return xn(r,t,u)}toDataURL(r){return Sn(this,r)}toImageData(r){return An(this,r)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(r){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let t=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=t,r&&this.disposer&&(this.disposer(),this.disposer=void 0),t}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(r){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return kn(this,r)}}});var ce,Yt=W(()=>{"use strict";jt();ce=ge});var Tr,Nn,$e,ze,_r=W(()=>{"use strict";Or();Tr=(n,r)=>{(typeof ve.trace>"u"?!ve.wasm.trace:!ve.trace)||console.timeStamp(`${n}::ORT::${r}`)},Nn=(n,r)=>{let t=new Error().stack?.split(/\r\n|\r|\n/g)||[],u=!1;for(let a=0;a<t.length;a++){if(u&&!t[a].includes("TRACE_FUNC")){let d=`FUNC_${n}::${t[a].trim().split(" ")[1]}`;r&&(d+=`::${r}`),Tr("CPU",d);return}t[a].includes("TRACE_FUNC")&&(u=!0)}},$e=n=>{(typeof ve.trace>"u"?!ve.wasm.trace:!ve.trace)||Nn("BEGIN",n)},ze=n=>{(typeof ve.trace>"u"?!ve.wasm.trace:!ve.trace)||Nn("END",n)}});var Vt,Hn=W(()=>{"use strict";zt();Yt();_r();Vt=class n{constructor(r){this.handler=r}async run(r,t,u){$e();let a={},d={};if(typeof r!="object"||r===null||r instanceof ce||Array.isArray(r))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let f=!0;if(typeof t=="object"){if(t===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof ce)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(t.length===0)throw new TypeError("'fetches' cannot be an empty array.");f=!1;for(let h of t){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);a[h]=null}if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,y=Object.getOwnPropertyNames(t);for(let O of this.outputNames)if(y.indexOf(O)!==-1){let b=t[O];(b===null||b instanceof ce)&&(h=!0,f=!1,a[O]=b)}if(h){if(typeof u=="object"&&u!==null)d=u;else if(typeof u<"u")throw new TypeError("'options' must be an object.")}else d=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of this.inputNames)if(typeof r[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(f)for(let h of this.outputNames)a[h]=null;let s=await this.handler.run(r,a,d),m={};for(let h in s)if(Object.hasOwnProperty.call(s,h)){let y=s[h];y instanceof ce?m[h]=y:m[h]=new ce(y.type,y.data,y.dims)}return ze(),m}async release(){return this.handler.dispose()}static async create(r,t,u,a){$e();let d,f={};if(typeof r=="string"){if(d=r,typeof t=="object"&&t!==null)f=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof Uint8Array){if(d=r,typeof t=="object"&&t!==null)f=t;else if(typeof t<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer){let y=r,O=0,b=r.byteLength;if(typeof t=="object"&&t!==null)f=t;else if(typeof t=="number"){if(O=t,!Number.isSafeInteger(O))throw new RangeError("'byteOffset' must be an integer.");if(O<0||O>=y.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${y.byteLength}).`);if(b=r.byteLength-O,typeof u=="number"){if(b=u,!Number.isSafeInteger(b))throw new RangeError("'byteLength' must be an integer.");if(b<=0||O+b>y.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${y.byteLength-O}].`);if(typeof a=="object"&&a!==null)f=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(typeof u<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof t<"u")throw new TypeError("'options' must be an object.");d=new Uint8Array(y,O,b)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[s,m]=await $t(f),h=await s.createInferenceSessionHandler(d,m);return ze(),new n(h)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}});var Wn,Gn=W(()=>{"use strict";Hn();Wn=Vt});var $n=W(()=>{"use strict"});var zn=W(()=>{"use strict"});var jn=W(()=>{"use strict"});var Yn=W(()=>{"use strict"});var to,qt,Vn=W(()=>{"use strict";zt();Yt();to="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",qt=class n{constructor(r,t,u){this.handler=r,this.hasOptimizerModel=t,this.hasEvalModel=u}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(r,t){let u=r.evalModel||"",a=r.optimizerModel||"",d=t||{},[f,s]=await $t(d);if(f.createTrainingSessionHandler){let m=await f.createTrainingSessionHandler(r.checkpointState,r.trainModel,u,a,s);return new n(m,!!r.optimizerModel,!!r.evalModel)}else throw new Error(to)}typeNarrowingForRunStep(r,t,u,a,d){let f={},s={};if(typeof u!="object"||u===null||u instanceof ce||Array.isArray(u))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let m=!0;if(typeof a=="object"){if(a===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(a instanceof ce)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(a)){if(a.length===0)throw new TypeError("'fetches' cannot be an empty array.");m=!1;for(let h of a){if(typeof h!="string")throw new TypeError("'fetches' must be a string array or an object.");if(t.indexOf(h)===-1)throw new RangeError(`'fetches' contains invalid output name: ${h}.`);f[h]=null}if(typeof d=="object"&&d!==null)s=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let h=!1,y=Object.getOwnPropertyNames(a);for(let O of t)if(y.indexOf(O)!==-1){let b=a[O];(b===null||b instanceof ce)&&(h=!0,m=!1,f[O]=b)}if(h){if(typeof d=="object"&&d!==null)s=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else s=a}}else if(typeof a<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let h of r)if(typeof u[h]>"u")throw new Error(`input '${h}' is missing in 'feeds'.`);if(m)for(let h of t)f[h]=null;return[f,s]}convertHandlerReturnTypeToMapOfTensors(r){let t={};for(let u in r)if(Object.hasOwnProperty.call(r,u)){let a=r[u];a instanceof ce?t[u]=a:t[u]=new ce(a.type,a.data,a.dims)}return t}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(r,t,u){let[a,d]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,r,t,u),f=await this.handler.runTrainStep(r,a,d);return this.convertHandlerReturnTypeToMapOfTensors(f)}async runOptimizerStep(r){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(r||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(r,t,u){if(this.hasEvalModel){let[a,d]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,r,t,u),f=await this.handler.runEvalStep(r,a,d);return this.convertHandlerReturnTypeToMapOfTensors(f)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(r=!0){return this.handler.getParametersSize(r)}async loadParametersBuffer(r,t=!0){let u=await this.getParametersSize(t);if(r.length!==4*u)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(r,t)}async getContiguousParameters(r=!0){return this.handler.getContiguousParameters(r)}async release(){return this.handler.dispose()}}});var qn,Jn=W(()=>{"use strict";Vn();qn=qt});var Er={};lt(Er,{InferenceSession:()=>Wn,TRACE:()=>Tr,TRACE_FUNC_BEGIN:()=>$e,TRACE_FUNC_END:()=>ze,Tensor:()=>ce,TrainingSession:()=>qn,env:()=>Y,registerBackend:()=>ct});var Ke=W(()=>{"use strict";On();En();Gn();Yt();$n();zn();_r();jn();Yn();Jn()});var Sr={};lt(Sr,{createReadStream:()=>Qn,readFile:()=>ro,readFileSync:()=>no});var ro,no,Qn,Ar=W(()=>{ro=void 0,no=void 0,Qn=void 0});var Mr={};lt(Mr,{join:()=>ao});var ao,Cr=W(()=>{ao=void 0});var ea=ft((Kn,Pr)=>{"use strict";var Zn=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r={}){var t=r,u,a;t.ready=new Promise((o,c)=>{u=o,a=c});var d=Object.assign({},t),f="./this.program",s=typeof window=="object",m=typeof importScripts=="function",h=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",y="",O,b,M;if(h){var P=(Ar(),Xe(Sr)),A=(Cr(),Xe(Mr));y=m?A.dirname(y)+"/":__dirname+"/",O=(o,c)=>(o=Pe(o)?new URL(o):A.normalize(o),P.readFileSync(o,c?void 0:"utf8")),M=o=>(o=O(o,!0),o.buffer||(o=new Uint8Array(o)),o),b=(o,c,p,w=!0)=>{o=Pe(o)?new URL(o):A.normalize(o),P.readFile(o,w?void 0:"utf8",(C,I)=>{C?p(C):c(w?I.buffer:I)})},!t.thisProgram&&1<process.argv.length&&(f=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),t.inspect=()=>"[Emscripten Module object]"}else(s||m)&&(m?y=self.location.href:typeof document<"u"&&document.currentScript&&(y=document.currentScript.src),n&&(y=n),y.indexOf("blob:")!==0?y=y.substr(0,y.replace(/[?#].*/,"").lastIndexOf("/")+1):y="",O=o=>{var c=new XMLHttpRequest;return c.open("GET",o,!1),c.send(null),c.responseText},m&&(M=o=>{var c=new XMLHttpRequest;return c.open("GET",o,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),b=(o,c,p)=>{var w=new XMLHttpRequest;w.open("GET",o,!0),w.responseType="arraybuffer",w.onload=()=>{w.status==200||w.status==0&&w.response?c(w.response):p()},w.onerror=p,w.send(null)});var S=console.log.bind(console),B=console.error.bind(console);Object.assign(t,d),d=null,typeof WebAssembly!="object"&&N("no native wasm support detected");var L,k=!1,$,j,x,q,Fe;function We(){var o=L.buffer;t.HEAP8=$=new Int8Array(o),t.HEAP16=new Int16Array(o),t.HEAPU8=j=new Uint8Array(o),t.HEAPU16=new Uint16Array(o),t.HEAP32=x=new Int32Array(o),t.HEAPU32=q=new Uint32Array(o),t.HEAPF32=new Float32Array(o),t.HEAPF64=Fe=new Float64Array(o)}var me=[],se=[],ne=[],Ce=0,_e=null,ie=null;function N(o){throw o="Aborted("+o+")",B(o),k=!0,o=new WebAssembly.RuntimeError(o+". Build with -sASSERTIONS for more info."),a(o),o}var Ee=o=>o.startsWith("data:application/octet-stream;base64,"),Pe=o=>o.startsWith("file://"),de;if(de="ort-training-wasm-simd.wasm",!Ee(de)){var Re=de;de=t.locateFile?t.locateFile(Re,y):y+Re}function Z(o){if(M)return M(o);throw"both async and sync fetching of the wasm failed"}function ye(o){if(s||m){if(typeof fetch=="function"&&!Pe(o))return fetch(o,{credentials:"same-origin"}).then(c=>{if(!c.ok)throw"failed to load wasm binary file at '"+o+"'";return c.arrayBuffer()}).catch(()=>Z(o));if(b)return new Promise((c,p)=>{b(o,w=>c(new Uint8Array(w)),p)})}return Promise.resolve().then(()=>Z(o))}function je(o,c,p){return ye(o).then(w=>WebAssembly.instantiate(w,c)).then(w=>w).then(p,w=>{B(`failed to asynchronously prepare wasm: ${w}`),N(w)})}function xe(o,c){var p=de;return typeof WebAssembly.instantiateStreaming!="function"||Ee(p)||Pe(p)||h||typeof fetch!="function"?je(p,o,c):fetch(p,{credentials:"same-origin"}).then(w=>WebAssembly.instantiateStreaming(w,o).then(c,function(C){return B(`wasm streaming compile failed: ${C}`),B("falling back to ArrayBuffer instantiation"),je(p,o,c)}))}var Se,Ae={862704:(o,c,p,w)=>{if(typeof t>"u"||!t.Qa)return 1;if(o=K(o>>>0),o.startsWith("./")&&(o=o.substring(2)),o=t.Qa.get(o),!o)return 2;if(c>>>=0,p>>>=0,c+p>o.byteLength)return 3;try{return j.set(o.subarray(c,c+p),w>>>0>>>0),0}catch{return 4}}};function Ye(o){this.Ka=o-24,this.Pa=function(c){q[this.Ka+4>>>2>>>0]=c},this.Oa=function(c){q[this.Ka+8>>>2>>>0]=c},this.Ma=function(c,p){this.Na(),this.Pa(c),this.Oa(p)},this.Na=function(){q[this.Ka+16>>>2>>>0]=0}}var we=0,Ie=0,ke=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,oe=(o,c,p)=>{c>>>=0;var w=c+p;for(p=c;o[p]&&!(p>=w);)++p;if(16<p-c&&o.buffer&&ke)return ke.decode(o.subarray(c,p));for(w="";c<p;){var C=o[c++];if(C&128){var I=o[c++]&63;if((C&224)==192)w+=String.fromCharCode((C&31)<<6|I);else{var H=o[c++]&63;C=(C&240)==224?(C&15)<<12|I<<6|H:(C&7)<<18|I<<12|H<<6|o[c++]&63,65536>C?w+=String.fromCharCode(C):(C-=65536,w+=String.fromCharCode(55296|C>>10,56320|C&1023))}}else w+=String.fromCharCode(C)}return w},K=(o,c)=>(o>>>=0)?oe(j,o,c):"",pe=o=>{for(var c=0,p=0;p<o.length;++p){var w=o.charCodeAt(p);127>=w?c++:2047>=w?c+=2:55296<=w&&57343>=w?(c+=4,++p):c+=3}return c},Le=(o,c,p,w)=>{if(p>>>=0,!(0<w))return 0;var C=p;w=p+w-1;for(var I=0;I<o.length;++I){var H=o.charCodeAt(I);if(55296<=H&&57343>=H){var ae=o.charCodeAt(++I);H=65536+((H&1023)<<10)|ae&1023}if(127>=H){if(p>=w)break;c[p++>>>0]=H}else{if(2047>=H){if(p+1>=w)break;c[p++>>>0]=192|H>>6}else{if(65535>=H){if(p+2>=w)break;c[p++>>>0]=224|H>>12}else{if(p+3>=w)break;c[p++>>>0]=240|H>>18,c[p++>>>0]=128|H>>12&63}c[p++>>>0]=128|H>>6&63}c[p++>>>0]=128|H&63}}return c[p>>>0]=0,p-C},De=o=>o%4===0&&(o%100!==0||o%400===0),yt=[0,31,60,91,121,152,182,213,244,274,305,335],Dt=[0,31,59,90,120,151,181,212,243,273,304,334],Ne=o=>{var c=pe(o)+1,p=Bt(c);return p&&Le(o,j,p,c),p},nt=[],Ge={},at=()=>{if(!ot){var o={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:f||"./this.program"},c;for(c in Ge)Ge[c]===void 0?delete o[c]:o[c]=Ge[c];var p=[];for(c in o)p.push(`${c}=${o[c]}`);ot=p}return ot},ot,Ve=[null,[],[]],wt=[31,29,31,30,31,30,31,31,30,31,30,31],bt=[31,28,31,30,31,30,31,31,30,31,30,31];function st(o){var c=Array(pe(o)+1);return Le(o,c,0,c.length),c}function Ut(o,c,p,w){function C(v,z,Q){for(v=typeof v=="number"?v.toString():v||"";v.length<z;)v=Q[0]+v;return v}function I(v,z){return C(v,z,"0")}function H(v,z){function Q(Et){return 0>Et?-1:0<Et?1:0}var Ue;return(Ue=Q(v.getFullYear()-z.getFullYear()))===0&&(Ue=Q(v.getMonth()-z.getMonth()))===0&&(Ue=Q(v.getDate()-z.getDate())),Ue}function ae(v){switch(v.getDay()){case 0:return new Date(v.getFullYear()-1,11,29);case 1:return v;case 2:return new Date(v.getFullYear(),0,3);case 3:return new Date(v.getFullYear(),0,2);case 4:return new Date(v.getFullYear(),0,1);case 5:return new Date(v.getFullYear()-1,11,31);case 6:return new Date(v.getFullYear()-1,11,30)}}function he(v){var z=v.Ga;for(v=new Date(new Date(v.Ha+1900,0,1).getTime());0<z;){var Q=v.getMonth(),Ue=(De(v.getFullYear())?wt:bt)[Q];if(z>Ue-v.getDate())z-=Ue-v.getDate()+1,v.setDate(1),11>Q?v.setMonth(Q+1):(v.setMonth(0),v.setFullYear(v.getFullYear()+1));else{v.setDate(v.getDate()+z);break}}return Q=new Date(v.getFullYear()+1,0,4),z=ae(new Date(v.getFullYear(),0,4)),Q=ae(Q),0>=H(z,v)?0>=H(Q,v)?v.getFullYear()+1:v.getFullYear():v.getFullYear()-1}o>>>=0,c>>>=0,p>>>=0,w>>>=0;var fe=q[w+40>>>2>>>0];w={Ta:x[w>>>2>>>0],Sa:x[w+4>>>2>>>0],Ia:x[w+8>>>2>>>0],La:x[w+12>>>2>>>0],Ja:x[w+16>>>2>>>0],Ha:x[w+20>>>2>>>0],Ba:x[w+24>>>2>>>0],Ga:x[w+28>>>2>>>0],Va:x[w+32>>>2>>>0],Ra:x[w+36>>>2>>>0],Ua:fe?K(fe):""},p=K(p),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var le in fe)p=p.replace(new RegExp(le,"g"),fe[le]);var Tt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),_t="January February March April May June July August September October November December".split(" ");fe={"%a":v=>Tt[v.Ba].substring(0,3),"%A":v=>Tt[v.Ba],"%b":v=>_t[v.Ja].substring(0,3),"%B":v=>_t[v.Ja],"%C":v=>I((v.Ha+1900)/100|0,2),"%d":v=>I(v.La,2),"%e":v=>C(v.La,2," "),"%g":v=>he(v).toString().substring(2),"%G":v=>he(v),"%H":v=>I(v.Ia,2),"%I":v=>(v=v.Ia,v==0?v=12:12<v&&(v-=12),I(v,2)),"%j":v=>{for(var z=0,Q=0;Q<=v.Ja-1;z+=(De(v.Ha+1900)?wt:bt)[Q++]);return I(v.La+z,3)},"%m":v=>I(v.Ja+1,2),"%M":v=>I(v.Sa,2),"%n":()=>`
`,"%p":v=>0<=v.Ia&&12>v.Ia?"AM":"PM","%S":v=>I(v.Ta,2),"%t":()=>"	","%u":v=>v.Ba||7,"%U":v=>I(Math.floor((v.Ga+7-v.Ba)/7),2),"%V":v=>{var z=Math.floor((v.Ga+7-(v.Ba+6)%7)/7);if(2>=(v.Ba+371-v.Ga-2)%7&&z++,z)z==53&&(Q=(v.Ba+371-v.Ga)%7,Q==4||Q==3&&De(v.Ha)||(z=1));else{z=52;var Q=(v.Ba+7-v.Ga-1)%7;(Q==4||Q==5&&De(v.Ha%400-1))&&z++}return I(z,2)},"%w":v=>v.Ba,"%W":v=>I(Math.floor((v.Ga+7-(v.Ba+6)%7)/7),2),"%y":v=>(v.Ha+1900).toString().substring(2),"%Y":v=>v.Ha+1900,"%z":v=>{v=v.Ra;var z=0<=v;return v=Math.abs(v)/60,(z?"+":"-")+("0000"+(v/60*100+v%60)).slice(-4)},"%Z":v=>v.Ua,"%%":()=>"%"},p=p.replace(/%%/g,"\0\0");for(le in fe)p.includes(le)&&(p=p.replace(new RegExp(le,"g"),fe[le](w)));return p=p.replace(/\0\0/g,"%"),le=st(p),le.length>c?0:($.set(le,o>>>0),le.length-1)}var J={a:function(o,c,p){throw o>>>=0,new Ye(o).Ma(c>>>0,p>>>0),we=o,Ie++,we},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(o,c,p){o=c+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*c:NaN,p>>>=0,o=new Date(1e3*o),x[p>>>2>>>0]=o.getUTCSeconds(),x[p+4>>>2>>>0]=o.getUTCMinutes(),x[p+8>>>2>>>0]=o.getUTCHours(),x[p+12>>>2>>>0]=o.getUTCDate(),x[p+16>>>2>>>0]=o.getUTCMonth(),x[p+20>>>2>>>0]=o.getUTCFullYear()-1900,x[p+24>>>2>>>0]=o.getUTCDay(),x[p+28>>>2>>>0]=(o.getTime()-Date.UTC(o.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(o,c,p){o=c+2097152>>>0<4194305-!!o?(o>>>0)+4294967296*c:NaN,p>>>=0,o=new Date(1e3*o),x[p>>>2>>>0]=o.getSeconds(),x[p+4>>>2>>>0]=o.getMinutes(),x[p+8>>>2>>>0]=o.getHours(),x[p+12>>>2>>>0]=o.getDate(),x[p+16>>>2>>>0]=o.getMonth(),x[p+20>>>2>>>0]=o.getFullYear()-1900,x[p+24>>>2>>>0]=o.getDay(),x[p+28>>>2>>>0]=(De(o.getFullYear())?yt:Dt)[o.getMonth()]+o.getDate()-1|0,x[p+36>>>2>>>0]=-(60*o.getTimezoneOffset()),c=new Date(o.getFullYear(),6,1).getTimezoneOffset();var w=new Date(o.getFullYear(),0,1).getTimezoneOffset();x[p+32>>>2>>>0]=(c!=w&&o.getTimezoneOffset()==Math.min(w,c))|0},p:function(o){o>>>=0;var c=new Date(x[o+20>>>2>>>0]+1900,x[o+16>>>2>>>0],x[o+12>>>2>>>0],x[o+8>>>2>>>0],x[o+4>>>2>>>0],x[o>>>2>>>0],0),p=x[o+32>>>2>>>0],w=c.getTimezoneOffset(),C=new Date(c.getFullYear(),6,1).getTimezoneOffset(),I=new Date(c.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(I,C);return 0>p?x[o+32>>>2>>>0]=+(C!=I&&H==w):0<p!=(H==w)&&(C=Math.max(I,C),c.setTime(c.getTime()+6e4*((0<p?H:C)-w))),x[o+24>>>2>>>0]=c.getDay(),x[o+28>>>2>>>0]=(De(c.getFullYear())?yt:Dt)[c.getMonth()]+c.getDate()-1|0,x[o>>>2>>>0]=c.getSeconds(),x[o+4>>>2>>>0]=c.getMinutes(),x[o+8>>>2>>>0]=c.getHours(),x[o+12>>>2>>>0]=c.getDate(),x[o+16>>>2>>>0]=c.getMonth(),x[o+20>>>2>>>0]=c.getYear(),o=c.getTime(),isNaN(o)?(x[it()>>>2>>>0]=61,o=-1):o/=1e3,Ot((Se=o,1<=+Math.abs(Se)?0<Se?+Math.floor(Se/4294967296)>>>0:~~+Math.ceil((Se-+(~~Se>>>0))/4294967296)>>>0:0)),o>>>0},l:function(){return-52},m:function(){},t:function(o,c,p){function w(he){return(he=he.toTimeString().match(/\(([A-Za-z ]+)\)$/))?he[1]:"GMT"}p>>>=0;var C=new Date().getFullYear(),I=new Date(C,0,1),H=new Date(C,6,1);C=I.getTimezoneOffset();var ae=H.getTimezoneOffset();q[o>>>0>>>2>>>0]=60*Math.max(C,ae),x[c>>>0>>>2>>>0]=+(C!=ae),o=w(I),c=w(H),o=Ne(o),c=Ne(c),ae<C?(q[p>>>2>>>0]=o,q[p+4>>>2>>>0]=c):(q[p>>>2>>>0]=c,q[p+4>>>2>>>0]=o)},d:()=>{N("")},B:function(o,c,p){o>>>=0,c>>>=0,p>>>=0,nt.length=0;for(var w;w=j[c++>>>0];){var C=w!=105;C&=w!=112,p+=C&&p%8?4:0,nt.push(w==112?q[p>>>2>>>0]:w==105?x[p>>>2>>>0]:Fe[p>>>3>>>0]),p+=C?8:4}return Ae[o].apply(null,nt)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(o,c,p){return c>>>=0,j.copyWithin(o>>>0>>>0,c>>>0,c+(p>>>0)>>>0)},s:function(o){o>>>=0;var c=j.length;if(4294901760<o)return!1;for(var p=1;4>=p;p*=2){var w=c*(1+.2/p);w=Math.min(w,o+100663296);var C=Math;w=Math.max(o,w);e:{C=(C.min.call(C,4294901760,w+(65536-w%65536)%65536)-L.buffer.byteLength+65535)/65536;try{L.grow(C),We();var I=1;break e}catch{}I=void 0}if(I)return!0}return!1},C:function(o,c){o>>>=0,c>>>=0;var p=0;return at().forEach((w,C)=>{var I=c+p;for(C=q[o+4*C>>>2>>>0]=I,I=0;I<w.length;++I)$[C++>>>0>>>0]=w.charCodeAt(I);$[C>>>0>>>0]=0,p+=w.length+1}),0},D:function(o,c){o>>>=0,c>>>=0;var p=at();q[o>>>2>>>0]=p.length;var w=0;return p.forEach(C=>w+=C.length+1),q[c>>>2>>>0]=w,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(o,c,p,w){c>>>=0,p>>>=0,w>>>=0;for(var C=0,I=0;I<p;I++){var H=q[c>>>2>>>0],ae=q[c+4>>>2>>>0];c+=8;for(var he=0;he<ae;he++){var fe=j[H+he>>>0],le=Ve[o];fe===0||fe===10?((o===1?S:B)(oe(le,0)),le.length=0):le.push(fe)}C+=ae}return q[w>>>2>>>0]=C,0},r:Ut,c:function(o,c,p,w){return Ut(o>>>0,c>>>0,p>>>0,w>>>0)}},D=function(){function o(p){return D=p.exports,D=kt(),L=D.K,We(),se.unshift(D.L),Ce--,Ce==0&&(_e!==null&&(clearInterval(_e),_e=null),ie&&(p=ie,ie=null,p())),D}var c={a:J};if(Ce++,t.instantiateWasm)try{return t.instantiateWasm(c,o)}catch(p){B(`Module.instantiateWasm callback failed with error: ${p}`),a(p)}return xe(c,function(p){o(p.instance)}).catch(a),{}}();t._OrtInit=(o,c)=>(t._OrtInit=D.M)(o,c),t._OrtGetLastError=(o,c)=>(t._OrtGetLastError=D.N)(o,c),t._OrtCreateSessionOptions=(o,c,p,w,C,I,H,ae,he,fe)=>(t._OrtCreateSessionOptions=D.O)(o,c,p,w,C,I,H,ae,he,fe),t._OrtAppendExecutionProvider=(o,c)=>(t._OrtAppendExecutionProvider=D.P)(o,c),t._OrtAddFreeDimensionOverride=(o,c,p)=>(t._OrtAddFreeDimensionOverride=D.Q)(o,c,p),t._OrtAddSessionConfigEntry=(o,c,p)=>(t._OrtAddSessionConfigEntry=D.R)(o,c,p),t._OrtReleaseSessionOptions=o=>(t._OrtReleaseSessionOptions=D.S)(o),t._OrtCreateSession=(o,c,p)=>(t._OrtCreateSession=D.T)(o,c,p),t._OrtReleaseSession=o=>(t._OrtReleaseSession=D.U)(o),t._OrtGetInputOutputCount=(o,c,p)=>(t._OrtGetInputOutputCount=D.V)(o,c,p),t._OrtGetInputName=(o,c)=>(t._OrtGetInputName=D.W)(o,c),t._OrtGetOutputName=(o,c)=>(t._OrtGetOutputName=D.X)(o,c),t._OrtFree=o=>(t._OrtFree=D.Y)(o),t._OrtCreateTensor=(o,c,p,w,C,I)=>(t._OrtCreateTensor=D.Z)(o,c,p,w,C,I),t._OrtGetTensorData=(o,c,p,w,C)=>(t._OrtGetTensorData=D._)(o,c,p,w,C),t._OrtReleaseTensor=o=>(t._OrtReleaseTensor=D.$)(o),t._OrtCreateRunOptions=(o,c,p,w)=>(t._OrtCreateRunOptions=D.aa)(o,c,p,w),t._OrtAddRunConfigEntry=(o,c,p)=>(t._OrtAddRunConfigEntry=D.ba)(o,c,p),t._OrtReleaseRunOptions=o=>(t._OrtReleaseRunOptions=D.ca)(o),t._OrtCreateBinding=o=>(t._OrtCreateBinding=D.da)(o),t._OrtBindInput=(o,c,p)=>(t._OrtBindInput=D.ea)(o,c,p),t._OrtBindOutput=(o,c,p,w)=>(t._OrtBindOutput=D.fa)(o,c,p,w),t._OrtClearBoundOutputs=o=>(t._OrtClearBoundOutputs=D.ga)(o),t._OrtReleaseBinding=o=>(t._OrtReleaseBinding=D.ha)(o),t._OrtRunWithBinding=(o,c,p,w,C)=>(t._OrtRunWithBinding=D.ia)(o,c,p,w,C),t._OrtRun=(o,c,p,w,C,I,H,ae)=>(t._OrtRun=D.ja)(o,c,p,w,C,I,H,ae),t._OrtEndProfiling=o=>(t._OrtEndProfiling=D.ka)(o),t._OrtTrainingLoadCheckpoint=(o,c)=>(t._OrtTrainingLoadCheckpoint=D.la)(o,c),t._OrtTrainingReleaseCheckpoint=o=>(t._OrtTrainingReleaseCheckpoint=D.ma)(o),t._OrtTrainingCreateSession=(o,c,p,w,C,I,H,ae)=>(t._OrtTrainingCreateSession=D.na)(o,c,p,w,C,I,H,ae),t._OrtTrainingLazyResetGrad=o=>(t._OrtTrainingLazyResetGrad=D.oa)(o),t._OrtTrainingRunTrainStep=(o,c,p,w,C,I)=>(t._OrtTrainingRunTrainStep=D.pa)(o,c,p,w,C,I),t._OrtTrainingOptimizerStep=(o,c)=>(t._OrtTrainingOptimizerStep=D.qa)(o,c),t._OrtTrainingEvalStep=(o,c,p,w,C,I)=>(t._OrtTrainingEvalStep=D.ra)(o,c,p,w,C,I),t._OrtTrainingGetParametersSize=(o,c,p)=>(t._OrtTrainingGetParametersSize=D.sa)(o,c,p),t._OrtTrainingCopyParametersToBuffer=(o,c,p,w)=>(t._OrtTrainingCopyParametersToBuffer=D.ta)(o,c,p,w),t._OrtTrainingCopyParametersFromBuffer=(o,c,p,w)=>(t._OrtTrainingCopyParametersFromBuffer=D.ua)(o,c,p,w),t._OrtTrainingGetModelInputOutputCount=(o,c,p,w)=>(t._OrtTrainingGetModelInputOutputCount=D.va)(o,c,p,w),t._OrtTrainingGetModelInputOutputName=(o,c,p,w)=>(t._OrtTrainingGetModelInputOutputName=D.wa)(o,c,p,w),t._OrtTrainingReleaseSession=o=>(t._OrtTrainingReleaseSession=D.xa)(o);var it=()=>(it=D.ya)(),Bt=t._malloc=o=>(Bt=t._malloc=D.za)(o);t._free=o=>(t._free=D.Aa)(o);var Ot=o=>(Ot=D.Ca)(o),Ft=()=>(Ft=D.Da)(),F=o=>(F=D.Ea)(o),qe=o=>(qe=D.Fa)(o);function kt(){var o=D;o=Object.assign({},o);var c=w=>()=>w()>>>0,p=w=>C=>w(C)>>>0;return o.ya=c(o.ya),o.za=p(o.za),o.Da=c(o.Da),o.Fa=p(o.Fa),o}t.stackAlloc=qe,t.stackSave=Ft,t.stackRestore=F,t.UTF8ToString=K,t.stringToUTF8=(o,c,p)=>Le(o,j,c,p),t.lengthBytesUTF8=pe;var He;ie=function o(){He||vt(),He||(ie=o)};function vt(){if(!(0<Ce)){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;){var o=t.preRun.shift();me.unshift(o)}for(;0<me.length;)me.shift()(t);if(!(0<Ce||He||(He=!0,t.calledRun=!0,k))){for(;0<se.length;)se.shift()(t);for(u(t);0<ne.length;)ne.shift()(t)}}}return vt(),r.ready}})();typeof Kn=="object"&&typeof Pr=="object"?Pr.exports=Zn:typeof define=="function"&&define.amd&&define([],()=>Zn)});var ta=ft(()=>{});var ra=ft(()=>{});var na={};lt(na,{cpus:()=>oo});var oo,aa=W(()=>{oo=void 0});var ia=ft((sa,Rr)=>{"use strict";var oa=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(r={}){function t(){return ne.buffer!=N.buffer&&Z(),N}function u(){return ne.buffer!=N.buffer&&Z(),Ee}function a(){return ne.buffer!=N.buffer&&Z(),Pe}function d(){return ne.buffer!=N.buffer&&Z(),de}function f(){return ne.buffer!=N.buffer&&Z(),Re}var s=r,m,h;s.ready=new Promise((e,i)=>{m=e,h=i});var y=Object.assign({},s),O="./this.program",b=(e,i)=>{throw i},M=typeof window=="object",P=typeof importScripts=="function",A=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S=s.ENVIRONMENT_IS_PTHREAD||!1,B="";function L(e){return s.locateFile?s.locateFile(e,B):B+e}var k,$,j;if(A){var x=(Ar(),Xe(Sr)),q=(Cr(),Xe(Mr));B=P?q.dirname(B)+"/":__dirname+"/",k=(i,l)=>(i=K(i)?new URL(i):q.normalize(i),x.readFileSync(i,l?void 0:"utf8")),j=i=>(i=k(i,!0),i.buffer||(i=new Uint8Array(i)),i),$=(i,l,g,_=!0)=>{i=K(i)?new URL(i):q.normalize(i),x.readFile(i,_?void 0:"utf8",(E,R)=>{E?g(E):l(_?R.buffer:R)})},!s.thisProgram&&1<process.argv.length&&(O=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),b=(i,l)=>{throw process.exitCode=i,l},s.inspect=()=>"[Emscripten Module object]";let e;try{e=ta()}catch(i){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),i}global.Worker=e.Worker}else(M||P)&&(P?B=self.location.href:typeof document<"u"&&document.currentScript&&(B=document.currentScript.src),typeof n<"u"&&n&&(B=n),B.indexOf("blob:")!==0?B=B.substr(0,B.replace(/[?#].*/,"").lastIndexOf("/")+1):B="",A||(k=e=>{var i=new XMLHttpRequest;return i.open("GET",e,!1),i.send(null),i.responseText},P&&(j=e=>{var i=new XMLHttpRequest;return i.open("GET",e,!1),i.responseType="arraybuffer",i.send(null),new Uint8Array(i.response)}),$=(e,i,l)=>{var g=new XMLHttpRequest;g.open("GET",e,!0),g.responseType="arraybuffer",g.onload=()=>{g.status==200||g.status==0&&g.response?i(g.response):l()},g.onerror=l,g.send(null)}));A&&typeof performance>"u"&&(global.performance=ra().performance);var Fe=console.log.bind(console),We=console.error.bind(console);A&&(Fe=(...e)=>x.writeSync(1,e.join(" ")+`
`),We=(...e)=>x.writeSync(2,e.join(" ")+`
`));var me=Fe,se=We;Object.assign(s,y),y=null,typeof WebAssembly!="object"&&ke("no native wasm support detected");var ne,Ce,_e=!1,ie,N,Ee,Pe,de,Re;function Z(){var e=ne.buffer;s.HEAP8=N=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=Ee=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=Pe=new Int32Array(e),s.HEAPU32=de=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=Re=new Float64Array(e)}var ye=16777216;if(S)ne=s.wasmMemory;else if(s.wasmMemory)ne=s.wasmMemory;else if(ne=new WebAssembly.Memory({initial:ye/65536,maximum:65536,shared:!0}),!(ne.buffer instanceof SharedArrayBuffer))throw se("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),A&&se("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Z(),ye=ne.buffer.byteLength;var je=[],xe=[],Se=[],Ae=0,Ye=null,we=null;function Ie(){if(Ae--,Ae==0&&(Ye!==null&&(clearInterval(Ye),Ye=null),we)){var e=we;we=null,e()}}function ke(e){throw e="Aborted("+e+")",se(e),_e=!0,ie=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),h(e),e}var oe=e=>e.startsWith("data:application/octet-stream;base64,"),K=e=>e.startsWith("file://"),pe;pe="ort-wasm-threaded.wasm",oe(pe)||(pe=L(pe));function Le(e){if(j)return j(e);throw"both async and sync fetching of the wasm failed"}function De(e){if(M||P){if(typeof fetch=="function"&&!K(e))return fetch(e,{credentials:"same-origin"}).then(i=>{if(!i.ok)throw"failed to load wasm binary file at '"+e+"'";return i.arrayBuffer()}).catch(()=>Le(e));if($)return new Promise((i,l)=>{$(e,g=>i(new Uint8Array(g)),l)})}return Promise.resolve().then(()=>Le(e))}function yt(e,i,l){return De(e).then(g=>WebAssembly.instantiate(g,i)).then(g=>g).then(l,g=>{se(`failed to asynchronously prepare wasm: ${g}`),ke(g)})}function Dt(e,i){var l=pe;return typeof WebAssembly.instantiateStreaming!="function"||oe(l)||K(l)||A||typeof fetch!="function"?yt(l,e,i):fetch(l,{credentials:"same-origin"}).then(g=>WebAssembly.instantiateStreaming(g,e).then(i,function(_){return se(`wasm streaming compile failed: ${_}`),se("falling back to ArrayBuffer instantiation"),yt(l,e,i)}))}var Ne,nt={793116:(e,i,l,g)=>{if(typeof s>"u"||!s.cb)return 1;if(e=st(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.cb.get(e),!e)return 2;if(i>>>=0,l>>>=0,g>>>=0,i+l>e.byteLength)return 3;try{return u().set(e.subarray(i,i+l),g>>>0),0}catch{return 4}}};function Ge(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var at=e=>{e.terminate(),e.onmessage=()=>{}},ot=e=>{F.Pa.length==0&&(Ot(),F.Ya(F.Pa[0]));var i=F.Pa.pop();if(!i)return 6;F.Qa.push(i),F.Ma[e.Oa]=i,i.Oa=e.Oa;var l={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return A&&i.unref(),i.postMessage(l,e.qb),0},Ve=0,wt=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,bt=(e,i,l)=>{i>>>=0;var g=i+l;for(l=i;e[l]&&!(l>=g);)++l;if(16<l-i&&e.buffer&&wt)return wt.decode(e.buffer instanceof SharedArrayBuffer?e.slice(i,l):e.subarray(i,l));for(g="";i<l;){var _=e[i++];if(_&128){var E=e[i++]&63;if((_&224)==192)g+=String.fromCharCode((_&31)<<6|E);else{var R=e[i++]&63;_=(_&240)==224?(_&15)<<12|E<<6|R:(_&7)<<18|E<<12|R<<6|e[i++]&63,65536>_?g+=String.fromCharCode(_):(_-=65536,g+=String.fromCharCode(55296|_>>10,56320|_&1023))}}else g+=String.fromCharCode(_)}return g},st=(e,i)=>(e>>>=0)?bt(u(),e,i):"",Ut=e=>{var i=yr();return e=e(),Ht(i),e};function J(e,i){var l=arguments.length-2,g=arguments;return Ut(()=>{for(var _=wr(8*l),E=_>>>3,R=0;R<l;R++){var te=g[2+R];f()[E+R>>>0]=te}return dn(e,l,_,i)})}function D(e){if(S)return J(0,1,e);ie=e,0<Ve||(F.lb(),s.onExit?.(e),_e=!0),b(e,new Ge(e))}var it=e=>{if(ie=e,S)throw kt(e),"unwind";D(e)};function Bt(){for(var e=s.numThreads;e--;)Ot();je.unshift(()=>{Ae++,Ft(()=>Ie())})}function Ot(){var e=L("ort-wasm-threaded.worker.js");e=new Worker(e),F.Pa.push(e)}function Ft(e){S?e():Promise.all(F.Pa.map(F.Ya)).then(e)}var F={Pa:[],Qa:[],bb:[],Ma:{},Wa(){S?(F.receiveObjectTransfer=F.jb,F.threadInitTLS=F.ab,F.setExitStatus=F.$a):Bt()},$a:e=>ie=e,tb:["$terminateWorker"],lb:()=>{for(var e of F.Qa)at(e);for(e of F.Pa)at(e);F.Pa=[],F.Qa=[],F.Ma=[]},Za:e=>{var i=e.Oa;delete F.Ma[i],F.Pa.push(e),F.Qa.splice(F.Qa.indexOf(e),1),e.Oa=0,hr(i)},jb(){},ab(){F.bb.forEach(e=>e())},Ya:e=>new Promise(i=>{e.onmessage=E=>{E=E.data;var R=E.cmd;if(E.targetThread&&E.targetThread!=Nt()){var te=F.Ma[E.targetThread];te?te.postMessage(E,E.transferList):se(`Internal error! Worker sent a message "${R}" to target pthread ${E.targetThread}, but that thread no longer exists!`)}else R==="checkMailbox"?Lt():R==="spawnThread"?ot(E):R==="cleanupThread"?F.Za(F.Ma[E.thread]):R==="killThread"?(E=E.thread,R=F.Ma[E],delete F.Ma[E],at(R),hr(E),F.Qa.splice(F.Qa.indexOf(R),1),R.Oa=0):R==="cancelThread"?F.Ma[E.thread].postMessage({cmd:"cancel"}):R==="loaded"?(e.loaded=!0,A&&!e.Oa&&e.unref(),i(e)):R==="alert"?alert(`Thread ${E.threadId}: ${E.text}`):E.target==="setimmediate"?e.postMessage(E):R==="callHandler"?s[E.handler](...E.args):R&&se(`worker sent an unknown command ${R}`)},e.onerror=E=>{throw se(`worker sent an error! ${E.filename}:${E.lineno}: ${E.message}`),E},A&&(e.on("message",E=>e.onmessage({data:E})),e.on("error",E=>e.onerror(E)));var l=[],g=["onExit"],_;for(_ of g)s.hasOwnProperty(_)&&l.push(_);e.postMessage({cmd:"load",handlers:l,urlOrBlob:s.mainScriptUrlOrBlob||n,wasmMemory:ne,wasmModule:Ce})})};s.PThread=F;var qe=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=Nt(),i=d()[e+52>>>2>>>0];e=d()[e+56>>>2>>>0],hn(i,i-e),Ht(i)};function kt(e){if(S)return J(1,0,e);it(e)}var He=[],vt;s.invokeEntryPoint=(e,i)=>{var l=He[e];l||(e>=He.length&&(He.length=e+1),He[e]=l=vt.get(e)),e=l(i),0<Ve?F.$a(e):gr(e)};function o(e){this.Va=e-24,this.gb=function(i){d()[this.Va+4>>>2>>>0]=i},this.fb=function(i){d()[this.Va+8>>>2>>>0]=i},this.Wa=function(i,l){this.eb(),this.gb(i),this.fb(l)},this.eb=function(){d()[this.Va+16>>>2>>>0]=0}}var c=0,p=0;function w(e,i,l,g){return S?J(2,1,e,i,l,g):C(e,i,l,g)}function C(e,i,l,g){if(e>>>=0,i>>>=0,l>>>=0,g>>>=0,typeof SharedArrayBuffer>"u")return se("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var _=[];return S&&_.length===0?w(e,i,l,g):(e={kb:l,Oa:e,hb:g,qb:_},S?(e.sb="spawnThread",postMessage(e,_),0):ot(e))}function I(e,i,l){return S?J(3,1,e,i,l):0}function H(e,i){if(S)return J(4,1,e,i)}var ae=e=>{for(var i=0,l=0;l<e.length;++l){var g=e.charCodeAt(l);127>=g?i++:2047>=g?i+=2:55296<=g&&57343>=g?(i+=4,++l):i+=3}return i},he=(e,i,l,g)=>{if(l>>>=0,!(0<g))return 0;var _=l;g=l+g-1;for(var E=0;E<e.length;++E){var R=e.charCodeAt(E);if(55296<=R&&57343>=R){var te=e.charCodeAt(++E);R=65536+((R&1023)<<10)|te&1023}if(127>=R){if(l>=g)break;i[l++>>>0]=R}else{if(2047>=R){if(l+1>=g)break;i[l++>>>0]=192|R>>6}else{if(65535>=R){if(l+2>=g)break;i[l++>>>0]=224|R>>12}else{if(l+3>=g)break;i[l++>>>0]=240|R>>18,i[l++>>>0]=128|R>>12&63}i[l++>>>0]=128|R>>6&63}i[l++>>>0]=128|R&63}}return i[l>>>0]=0,l-_},fe=(e,i,l)=>he(e,u(),i,l);function le(e,i){if(S)return J(5,1,e,i)}function Tt(e,i,l){if(S)return J(6,1,e,i,l)}function _t(e,i,l){return S?J(7,1,e,i,l):0}function v(e,i){if(S)return J(8,1,e,i)}function z(e,i,l){if(S)return J(9,1,e,i,l)}function Q(e,i,l,g){if(S)return J(10,1,e,i,l,g)}function Ue(e,i,l,g){if(S)return J(11,1,e,i,l,g)}function Et(e,i,l,g){if(S)return J(12,1,e,i,l,g)}function zr(e){if(S)return J(13,1,e)}function jr(e,i){if(S)return J(14,1,e,i)}function Yr(e,i,l){if(S)return J(15,1,e,i,l)}function lr(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(a(),e>>>2,e).value.then(Lt),e+=128,Atomics.store(a(),e>>>2,1))}s.__emscripten_thread_mailbox_await=lr;var Lt=()=>{var e=Nt();if(e&&(lr(e),e=pn,!_e))try{if(e(),!(0<Ve))try{S?gr(ie):it(ie)}catch(i){i instanceof Ge||i=="unwind"||b(1,i)}}catch(i){i instanceof Ge||i=="unwind"||b(1,i)}};s.checkMailbox=Lt;var cr=[],ut=e=>e%4===0&&(e%100!==0||e%400===0),Vr=[0,31,60,91,121,152,182,213,244,274,305,335],qr=[0,31,59,90,120,151,181,212,243,273,304,334];function Jr(e,i,l,g,_,E,R,te){return S?J(16,1,e,i,l,g,_,E,R,te):-52}function Xr(e,i,l,g,_,E,R){if(S)return J(17,1,e,i,l,g,_,E,R)}var Qr=e=>{var i=ae(e)+1,l=ln(i);return l&&fe(e,l,i),l},dr=[],pr={},Zr=()=>{if(!mr){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:O||"./this.program"},i;for(i in pr)pr[i]===void 0?delete e[i]:e[i]=pr[i];var l=[];for(i in e)l.push(`${i}=${e[i]}`);mr=l}return mr},mr;function Kr(e,i){if(S)return J(18,1,e,i);e>>>=0,i>>>=0;var l=0;return Zr().forEach((g,_)=>{var E=i+l;for(_=d()[e+4*_>>>2>>>0]=E,E=0;E<g.length;++E)t()[_++>>>0>>>0]=g.charCodeAt(E);t()[_>>>0>>>0]=0,l+=g.length+1}),0}function en(e,i){if(S)return J(19,1,e,i);e>>>=0,i>>>=0;var l=Zr();d()[e>>>2>>>0]=l.length;var g=0;return l.forEach(_=>g+=_.length+1),d()[i>>>2>>>0]=g,0}function tn(e){return S?J(20,1,e):52}function rn(e,i,l,g){return S?J(21,1,e,i,l,g):52}function nn(e,i,l,g,_){return S?J(22,1,e,i,l,g,_):70}var za=[null,[],[]];function an(e,i,l,g){if(S)return J(23,1,e,i,l,g);i>>>=0,l>>>=0,g>>>=0;for(var _=0,E=0;E<l;E++){var R=d()[i>>>2>>>0],te=d()[i+4>>>2>>>0];i+=8;for(var Be=0;Be<te;Be++){var ue=u()[R+Be>>>0],be=za[e];ue===0||ue===10?((e===1?me:se)(bt(be,0)),be.length=0):be.push(ue)}_+=te}return d()[g>>>2>>>0]=_,0}var on=[31,29,31,30,31,30,31,31,30,31,30,31],sn=[31,28,31,30,31,30,31,31,30,31,30,31];function ja(e){var i=Array(ae(e)+1);return he(e,i,0,i.length),i}var Ya=(e,i)=>{t().set(e,i>>>0)};function un(e,i,l,g){function _(T,V,re){for(T=typeof T=="number"?T.toString():T||"";T.length<V;)T=re[0]+T;return T}function E(T,V){return _(T,V,"0")}function R(T,V){function re(bn){return 0>bn?-1:0<bn?1:0}var Je;return(Je=re(T.getFullYear()-V.getFullYear()))===0&&(Je=re(T.getMonth()-V.getMonth()))===0&&(Je=re(T.getDate()-V.getDate())),Je}function te(T){switch(T.getDay()){case 0:return new Date(T.getFullYear()-1,11,29);case 1:return T;case 2:return new Date(T.getFullYear(),0,3);case 3:return new Date(T.getFullYear(),0,2);case 4:return new Date(T.getFullYear(),0,1);case 5:return new Date(T.getFullYear()-1,11,31);case 6:return new Date(T.getFullYear()-1,11,30)}}function Be(T){var V=T.Ra;for(T=new Date(new Date(T.Sa+1900,0,1).getTime());0<V;){var re=T.getMonth(),Je=(ut(T.getFullYear())?on:sn)[re];if(V>Je-T.getDate())V-=Je-T.getDate()+1,T.setDate(1),11>re?T.setMonth(re+1):(T.setMonth(0),T.setFullYear(T.getFullYear()+1));else{T.setDate(T.getDate()+V);break}}return re=new Date(T.getFullYear()+1,0,4),V=te(new Date(T.getFullYear(),0,4)),re=te(re),0>=R(V,T)?0>=R(re,T)?T.getFullYear()+1:T.getFullYear():T.getFullYear()-1}e>>>=0,i>>>=0,l>>>=0,g>>>=0;var ue=d()[g+40>>>2>>>0];g={ob:a()[g>>>2>>>0],nb:a()[g+4>>>2>>>0],Ta:a()[g+8>>>2>>>0],Xa:a()[g+12>>>2>>>0],Ua:a()[g+16>>>2>>>0],Sa:a()[g+20>>>2>>>0],Na:a()[g+24>>>2>>>0],Ra:a()[g+28>>>2>>>0],ub:a()[g+32>>>2>>>0],mb:a()[g+36>>>2>>>0],pb:ue?st(ue):""},l=st(l),ue={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var be in ue)l=l.replace(new RegExp(be,"g"),ue[be]);var yn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),wn="January February March April May June July August September October November December".split(" ");ue={"%a":T=>yn[T.Na].substring(0,3),"%A":T=>yn[T.Na],"%b":T=>wn[T.Ua].substring(0,3),"%B":T=>wn[T.Ua],"%C":T=>E((T.Sa+1900)/100|0,2),"%d":T=>E(T.Xa,2),"%e":T=>_(T.Xa,2," "),"%g":T=>Be(T).toString().substring(2),"%G":T=>Be(T),"%H":T=>E(T.Ta,2),"%I":T=>(T=T.Ta,T==0?T=12:12<T&&(T-=12),E(T,2)),"%j":T=>{for(var V=0,re=0;re<=T.Ua-1;V+=(ut(T.Sa+1900)?on:sn)[re++]);return E(T.Xa+V,3)},"%m":T=>E(T.Ua+1,2),"%M":T=>E(T.nb,2),"%n":()=>`
`,"%p":T=>0<=T.Ta&&12>T.Ta?"AM":"PM","%S":T=>E(T.ob,2),"%t":()=>"	","%u":T=>T.Na||7,"%U":T=>E(Math.floor((T.Ra+7-T.Na)/7),2),"%V":T=>{var V=Math.floor((T.Ra+7-(T.Na+6)%7)/7);if(2>=(T.Na+371-T.Ra-2)%7&&V++,V)V==53&&(re=(T.Na+371-T.Ra)%7,re==4||re==3&&ut(T.Sa)||(V=1));else{V=52;var re=(T.Na+7-T.Ra-1)%7;(re==4||re==5&&ut(T.Sa%400-1))&&V++}return E(V,2)},"%w":T=>T.Na,"%W":T=>E(Math.floor((T.Ra+7-(T.Na+6)%7)/7),2),"%y":T=>(T.Sa+1900).toString().substring(2),"%Y":T=>T.Sa+1900,"%z":T=>{T=T.mb;var V=0<=T;return T=Math.abs(T)/60,(V?"+":"-")+("0000"+(T/60*100+T%60)).slice(-4)},"%Z":T=>T.pb,"%%":()=>"%"},l=l.replace(/%%/g,"\0\0");for(be in ue)l.includes(be)&&(l=l.replace(new RegExp(be,"g"),ue[be](g)));return l=l.replace(/\0\0/g,"%"),be=ja(l),be.length>i?0:(Ya(be,e),be.length-1)}F.Wa();var Va=[D,kt,w,I,H,le,Tt,_t,v,z,Q,Ue,Et,zr,jr,Yr,Jr,Xr,Kr,en,tn,rn,nn,an],qa={b:function(e,i,l){throw e>>>=0,new o(e).Wa(i>>>0,l>>>0),c=e,p++,c},L:function(e){cn(e>>>0,!P,1,!M,131072,!1),F.ab()},j:function(e){e>>>=0,S?postMessage({cmd:"cleanupThread",thread:e}):F.Za(F.Ma[e])},H:C,h:I,S:H,D:le,F:Tt,T:_t,Q:v,J:z,P:Q,n:Ue,E:Et,B:zr,R:jr,C:Yr,p:()=>1,z:function(e,i){e>>>=0,e==i>>>0?setTimeout(()=>Lt()):S?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=F.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,i,l,g){i>>>=0,cr.length=l,g=g>>>0>>>3;for(var _=0;_<l;_++)cr[_]=f()[g+_>>>0];return e=0>e?nt[-e-1]:Va[e],F.ib=i,i=e.apply(null,cr),F.ib=0,i},K:lr,o:function(e){A&&F.Ma[e>>>0].ref()},s:function(e,i,l){e=i+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*i:NaN,l>>>=0,e=new Date(1e3*e),a()[l>>>2>>>0]=e.getUTCSeconds(),a()[l+4>>>2>>>0]=e.getUTCMinutes(),a()[l+8>>>2>>>0]=e.getUTCHours(),a()[l+12>>>2>>>0]=e.getUTCDate(),a()[l+16>>>2>>>0]=e.getUTCMonth(),a()[l+20>>>2>>>0]=e.getUTCFullYear()-1900,a()[l+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>>2>>>0]=e},t:function(e,i,l){e=i+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*i:NaN,l>>>=0,e=new Date(1e3*e),a()[l>>>2>>>0]=e.getSeconds(),a()[l+4>>>2>>>0]=e.getMinutes(),a()[l+8>>>2>>>0]=e.getHours(),a()[l+12>>>2>>>0]=e.getDate(),a()[l+16>>>2>>>0]=e.getMonth(),a()[l+20>>>2>>>0]=e.getFullYear()-1900,a()[l+24>>>2>>>0]=e.getDay(),i=(ut(e.getFullYear())?Vr:qr)[e.getMonth()]+e.getDate()-1|0,a()[l+28>>>2>>>0]=i,a()[l+36>>>2>>>0]=-(60*e.getTimezoneOffset()),i=new Date(e.getFullYear(),6,1).getTimezoneOffset();var g=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(i!=g&&e.getTimezoneOffset()==Math.min(g,i))|0,a()[l+32>>>2>>>0]=e},u:function(e){e>>>=0;var i=new Date(a()[e+20>>>2>>>0]+1900,a()[e+16>>>2>>>0],a()[e+12>>>2>>>0],a()[e+8>>>2>>>0],a()[e+4>>>2>>>0],a()[e>>>2>>>0],0),l=a()[e+32>>>2>>>0],g=i.getTimezoneOffset(),_=new Date(i.getFullYear(),6,1).getTimezoneOffset(),E=new Date(i.getFullYear(),0,1).getTimezoneOffset(),R=Math.min(E,_);return 0>l?a()[e+32>>>2>>>0]=+(_!=E&&R==g):0<l!=(R==g)&&(_=Math.max(E,_),i.setTime(i.getTime()+6e4*((0<l?R:_)-g))),a()[e+24>>>2>>>0]=i.getDay(),l=(ut(i.getFullYear())?Vr:qr)[i.getMonth()]+i.getDate()-1|0,a()[e+28>>>2>>>0]=l,a()[e>>>2>>>0]=i.getSeconds(),a()[e+4>>>2>>>0]=i.getMinutes(),a()[e+8>>>2>>>0]=i.getHours(),a()[e+12>>>2>>>0]=i.getDate(),a()[e+16>>>2>>>0]=i.getMonth(),a()[e+20>>>2>>>0]=i.getYear(),e=i.getTime(),isNaN(e)?(a()[fn()>>>2>>>0]=61,e=-1):e/=1e3,mn((Ne=e,1<=+Math.abs(Ne)?0<Ne?+Math.floor(Ne/4294967296)>>>0:~~+Math.ceil((Ne-+(~~Ne>>>0))/4294967296)>>>0:0)),e>>>0},q:Jr,r:Xr,y:function(e,i,l){function g(ue){return(ue=ue.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ue[1]:"GMT"}e>>>=0,i>>>=0,l>>>=0;var _=new Date().getFullYear(),E=new Date(_,0,1),R=new Date(_,6,1);_=E.getTimezoneOffset();var te=R.getTimezoneOffset(),Be=Math.max(_,te);d()[e>>>2>>>0]=60*Be,a()[i>>>2>>>0]=+(_!=te),e=g(E),i=g(R),e=Qr(e),i=Qr(i),te<_?(d()[l>>>2>>>0]=e,d()[l+4>>>2>>>0]=i):(d()[l>>>2>>>0]=i,d()[l+4>>>2>>>0]=e)},c:()=>{ke("")},O:function(e,i,l){e>>>=0,i>>>=0,l>>>=0,dr.length=0;for(var g;g=u()[i++>>>0];){var _=g!=105;_&=g!=112,l+=_&&l%8?4:0,dr.push(g==112?d()[l>>>2>>>0]:g==105?a()[l>>>2>>>0]:f()[l>>>3>>>0]),l+=_?8:4}return nt[e].apply(null,dr)},k:()=>{},i:()=>Date.now(),U:()=>{throw Ve+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>A?(aa(),Xe(na)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var i=u().length;if(e<=i||4294901760<e)return!1;for(var l=1;4>=l;l*=2){var g=i*(1+.2/l);g=Math.min(g,e+100663296);var _=Math;g=Math.max(e,g);e:{_=(_.min.call(_,4294901760,g+(65536-g%65536)%65536)-ne.buffer.byteLength+65535)/65536;try{ne.grow(_),Z();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},M:Kr,N:en,G:it,g:tn,m:rn,v:nn,l:an,a:ne||s.wasmMemory,w:un,d:function(e,i,l,g){return un(e>>>0,i>>>0,l>>>0,g>>>0)}},U=function(){function e(l,g){return U=l.exports,U=Ja(),F.bb.push(U.za),vt=U.Aa,xe.unshift(U.V),Ce=g,Ie(),U}var i={a:qa};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(i,e)}catch(l){se(`Module.instantiateWasm callback failed with error: ${l}`),h(l)}return Dt(i,function(l){e(l.instance,l.module)}).catch(h),{}}();s._OrtInit=(e,i)=>(s._OrtInit=U.W)(e,i),s._OrtGetLastError=(e,i)=>(s._OrtGetLastError=U.X)(e,i),s._OrtCreateSessionOptions=(e,i,l,g,_,E,R,te,Be,ue)=>(s._OrtCreateSessionOptions=U.Y)(e,i,l,g,_,E,R,te,Be,ue),s._OrtAppendExecutionProvider=(e,i)=>(s._OrtAppendExecutionProvider=U.Z)(e,i),s._OrtAddFreeDimensionOverride=(e,i,l)=>(s._OrtAddFreeDimensionOverride=U._)(e,i,l),s._OrtAddSessionConfigEntry=(e,i,l)=>(s._OrtAddSessionConfigEntry=U.$)(e,i,l),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=U.aa)(e),s._OrtCreateSession=(e,i,l)=>(s._OrtCreateSession=U.ba)(e,i,l),s._OrtReleaseSession=e=>(s._OrtReleaseSession=U.ca)(e),s._OrtGetInputOutputCount=(e,i,l)=>(s._OrtGetInputOutputCount=U.da)(e,i,l),s._OrtGetInputName=(e,i)=>(s._OrtGetInputName=U.ea)(e,i),s._OrtGetOutputName=(e,i)=>(s._OrtGetOutputName=U.fa)(e,i),s._OrtFree=e=>(s._OrtFree=U.ga)(e),s._OrtCreateTensor=(e,i,l,g,_,E)=>(s._OrtCreateTensor=U.ha)(e,i,l,g,_,E),s._OrtGetTensorData=(e,i,l,g,_)=>(s._OrtGetTensorData=U.ia)(e,i,l,g,_),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=U.ja)(e),s._OrtCreateRunOptions=(e,i,l,g)=>(s._OrtCreateRunOptions=U.ka)(e,i,l,g),s._OrtAddRunConfigEntry=(e,i,l)=>(s._OrtAddRunConfigEntry=U.la)(e,i,l),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=U.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=U.na)(e),s._OrtBindInput=(e,i,l)=>(s._OrtBindInput=U.oa)(e,i,l),s._OrtBindOutput=(e,i,l,g)=>(s._OrtBindOutput=U.pa)(e,i,l,g),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=U.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=U.ra)(e),s._OrtRunWithBinding=(e,i,l,g,_)=>(s._OrtRunWithBinding=U.sa)(e,i,l,g,_),s._OrtRun=(e,i,l,g,_,E,R,te)=>(s._OrtRun=U.ta)(e,i,l,g,_,E,R,te),s._OrtEndProfiling=e=>(s._OrtEndProfiling=U.ua)(e);var fn=()=>(fn=U.va)(),Nt=s._pthread_self=()=>(Nt=s._pthread_self=U.wa)(),ln=s._malloc=e=>(ln=s._malloc=U.xa)(e);s._free=e=>(s._free=U.ya)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=U.za)();var cn=s.__emscripten_thread_init=(e,i,l,g,_,E)=>(cn=s.__emscripten_thread_init=U.Ba)(e,i,l,g,_,E);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=U.Ca)();var dn=(e,i,l,g)=>(dn=U.Da)(e,i,l,g),hr=e=>(hr=U.Ea)(e),gr=s.__emscripten_thread_exit=e=>(gr=s.__emscripten_thread_exit=U.Fa)(e),pn=()=>(pn=U.Ga)(),mn=e=>(mn=U.Ha)(e),hn=(e,i)=>(hn=U.Ia)(e,i),yr=()=>(yr=U.Ja)(),Ht=e=>(Ht=U.Ka)(e),wr=e=>(wr=U.La)(e);function Ja(){var e=U;e=Object.assign({},e);var i=g=>()=>g()>>>0,l=g=>_=>g(_)>>>0;return e.va=i(e.va),e.wa=i(e.wa),e.xa=l(e.xa),e.emscripten_main_runtime_thread_id=i(e.emscripten_main_runtime_thread_id),e.Ja=i(e.Ja),e.La=l(e.La),e}s.wasmMemory=ne,s.stackAlloc=wr,s.stackSave=yr,s.stackRestore=Ht,s.keepRuntimeAlive=()=>0<Ve,s.UTF8ToString=st,s.stringToUTF8=fe,s.lengthBytesUTF8=ae,s.ExitStatus=Ge,s.PThread=F;var Wt;we=function e(){Wt||gn(),Wt||(we=e)};function gn(){if(!(0<Ae))if(S)m(s),S||qe(xe),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)je.unshift(s.preRun.shift());qe(je),0<Ae||Wt||(Wt=!0,s.calledRun=!0,_e||(S||qe(xe),m(s),S||qe(Se)))}}return gn(),r.ready}})();typeof sa=="object"&&typeof Rr=="object"?Rr.exports=oa:typeof define=="function"&&define.amd&&define([],()=>oa)});var ua=ft((Ts,so)=>{so.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'});var la,io,xr,Ir,Jt,fa,uo,fo,lo,ca,G,et=W(()=>{"use strict";la=ea();io=ia(),Ir=!1,Jt=!1,fa=!1,uo=n=>{if(n===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+n+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+n+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},fo=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},lo=(n,r)=>n?"ort-training-wasm-simd.wasm":r?"ort-wasm-threaded.wasm":"ort-wasm.wasm",ca=async n=>{if(Ir)return Promise.resolve();if(Jt)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(fa)throw new Error("previous call to 'initializeWebAssembly()' failed.");Jt=!0;let r=n.initTimeout,t=n.numThreads,u=n.simd,a=uo(t),d=u&&fo(),f=n.wasmPaths,s=typeof f=="string"?f:void 0,m=lo(d,a),h=typeof f=="object"?f[m]:void 0,y=!1,O=[];if(r>0&&O.push(new Promise(b=>{setTimeout(()=>{y=!0,b()},r)})),O.push(new Promise((b,M)=>{let P=a?io:la,A={locateFile:(S,B)=>a&&S.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([ua()],{type:"text/javascript"})):S.endsWith(".wasm")?h||(s??B)+m:B+S};if(a)if(A.numThreads=t,typeof Blob>"u")A.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let S=`var ortWasmThreaded=${P.toString()};`;A.mainScriptUrlOrBlob=new Blob([S],{type:"text/javascript"})}P(A).then(S=>{Jt=!1,Ir=!0,xr=S,b()},S=>{Jt=!1,fa=!0,M(S)})})),await Promise.race(O),y)throw new Error(`WebAssembly backend initializing failed due to timeout: ${r}ms`)},G=()=>{if(Ir&&xr)return xr;throw new Error("WebAssembly is not initialized yet.")}});var ee,At,X,Mt=W(()=>{"use strict";et();ee=(n,r)=>{let t=G(),u=t.lengthBytesUTF8(n)+1,a=t._malloc(u);return t.stringToUTF8(n,a,u),r.push(a),a},At=(n,r,t,u)=>{if(typeof n=="object"&&n!==null){if(t.has(n))throw new Error("Circular reference in options");t.add(n)}Object.entries(n).forEach(([a,d])=>{let f=r?r+a:a;if(typeof d=="object")At(d,f+".",t,u);else if(typeof d=="string"||typeof d=="number")u(f,d.toString());else if(typeof d=="boolean")u(f,d?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof d}`)})},X=n=>{let r=G(),t=r.stackSave();try{let u=r.stackAlloc(8);r._OrtGetLastError(u,u+4);let a=r.HEAP32[u/4],d=r.HEAPU32[u/4+1],f=d?r.UTF8ToString(d):"";throw new Error(`${n} ERROR_CODE: ${a}, ERROR_MESSAGE: ${f}`)}finally{r.stackRestore(t)}}});var dt,Dr=W(()=>{"use strict";et();Mt();dt=n=>{let r=G(),t=0,u=[],a=n||{};try{if(n?.logSeverityLevel===void 0)a.logSeverityLevel=2;else if(typeof n.logSeverityLevel!="number"||!Number.isInteger(n.logSeverityLevel)||n.logSeverityLevel<0||n.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${n.logSeverityLevel}`);if(n?.logVerbosityLevel===void 0)a.logVerbosityLevel=0;else if(typeof n.logVerbosityLevel!="number"||!Number.isInteger(n.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${n.logVerbosityLevel}`);n?.terminate===void 0&&(a.terminate=!1);let d=0;return n?.tag!==void 0&&(d=ee(n.tag,u)),t=r._OrtCreateRunOptions(a.logSeverityLevel,a.logVerbosityLevel,!!a.terminate,d),t===0&&X("Can't create run options."),n?.extra!==void 0&&At(n.extra,"",new WeakSet,(f,s)=>{let m=ee(f,u),h=ee(s,u);r._OrtAddRunConfigEntry(t,m,h)!==0&&X(`Can't set a run config entry: ${f} - ${s}.`)}),[t,u]}catch(d){throw t!==0&&r._OrtReleaseRunOptions(t),u.forEach(f=>r._free(f)),d}}});var co,po,mo,ho,Xt,Ur=W(()=>{"use strict";et();Mt();co=n=>{switch(n){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${n}`)}},po=n=>{switch(n){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${n}`)}},mo=n=>{n.extra||(n.extra={}),n.extra.session||(n.extra.session={});let r=n.extra.session;r.use_ort_model_bytes_directly||(r.use_ort_model_bytes_directly="1"),n.executionProviders&&n.executionProviders.some(t=>(typeof t=="string"?t:t.name)==="webgpu")&&(n.enableMemPattern=!1)},ho=(n,r,t)=>{for(let u of r){let a=typeof u=="string"?u:u.name;switch(a){case"webnn":if(a="WEBNN",typeof u!="string"){let f=u;if(f?.deviceType){let s=ee("deviceType",t),m=ee(f.deviceType,t);G()._OrtAddSessionConfigEntry(n,s,m)!==0&&X(`Can't set a session config entry: 'deviceType' - ${f.deviceType}.`)}if(f?.numThreads){let s=f.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let m=ee("numThreads",t),h=ee(s.toString(),t);G()._OrtAddSessionConfigEntry(n,m,h)!==0&&X(`Can't set a session config entry: 'numThreads' - ${f.numThreads}.`)}if(f?.powerPreference){let s=ee("powerPreference",t),m=ee(f.powerPreference,t);G()._OrtAddSessionConfigEntry(n,s,m)!==0&&X(`Can't set a session config entry: 'powerPreference' - ${f.powerPreference}.`)}}break;case"webgpu":if(a="JS",typeof u!="string"){let f=u;if(f?.preferredLayout){if(f.preferredLayout!=="NCHW"&&f.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${f.preferredLayout}`);let s=ee("preferredLayout",t),m=ee(f.preferredLayout,t);G()._OrtAddSessionConfigEntry(n,s,m)!==0&&X(`Can't set a session config entry: 'preferredLayout' - ${f.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${a}`)}let d=ee(a,t);G()._OrtAppendExecutionProvider(n,d)!==0&&X(`Can't append execution provider: ${a}.`)}},Xt=n=>{let r=G(),t=0,u=[],a=n||{};mo(a);try{let d=co(a.graphOptimizationLevel??"all"),f=po(a.executionMode??"sequential"),s=typeof a.logId=="string"?ee(a.logId,u):0,m=a.logSeverityLevel??2;if(!Number.isInteger(m)||m<0||m>4)throw new Error(`log serverity level is not valid: ${m}`);let h=a.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let y=typeof a.optimizedModelFilePath=="string"?ee(a.optimizedModelFilePath,u):0;if(t=r._OrtCreateSessionOptions(d,!!a.enableCpuMemArena,!!a.enableMemPattern,f,!!a.enableProfiling,0,s,m,h,y),t===0&&X("Can't create session options."),a.executionProviders&&ho(t,a.executionProviders,u),a.enableGraphCapture!==void 0){if(typeof a.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${a.enableGraphCapture}`);let O=ee("enableGraphCapture",u),b=ee(a.enableGraphCapture.toString(),u);r._OrtAddSessionConfigEntry(t,O,b)!==0&&X(`Can't set a session config entry: 'enableGraphCapture' - ${a.enableGraphCapture}.`)}if(a.freeDimensionOverrides)for(let[O,b]of Object.entries(a.freeDimensionOverrides)){if(typeof O!="string")throw new Error(`free dimension override name must be a string: ${O}`);if(typeof b!="number"||!Number.isInteger(b)||b<0)throw new Error(`free dimension override value must be a non-negative integer: ${b}`);let M=ee(O,u);r._OrtAddFreeDimensionOverride(t,M,b)!==0&&X(`Can't set a free dimension override: ${O} - ${b}.`)}return a.extra!==void 0&&At(a.extra,"",new WeakSet,(O,b)=>{let M=ee(O,u),P=ee(b,u);r._OrtAddSessionConfigEntry(t,M,P)!==0&&X(`Can't set a session config entry: ${O} - ${b}.`)}),[t,u]}catch(d){throw t!==0&&r._OrtReleaseSessionOptions(t),u.forEach(f=>r._free(f)),d}}});var pt,Qt,Br,Ct,da,Zt,Pt,Kt=W(()=>{"use strict";pt=n=>{switch(n){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${n}`)}},Qt=n=>{switch(n){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${n}`)}},Br=n=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][n],Ct=n=>{switch(n){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${n}`)}},da=n=>{switch(n){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${n}`)}},Zt=n=>n==="float32"||n==="float16"||n==="int32"||n==="int64"||n==="uint32"||n==="uint8"||n==="bool",Pt=n=>{switch(n){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${n}`)}}});var Rt,Fr=W(()=>{"use strict";Rt=async n=>{if(typeof n=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(n))}catch(r){if(r.code==="ERR_FS_FILE_TOO_LARGE"){let t=(void 0)(n),u=[];for await(let a of t)u.push(a);return new Uint8Array(Buffer.concat(u))}throw r}else{let r=await fetch(n);if(!r.ok)throw new Error(`failed to load external data file: ${n}`);let t=r.headers.get("Content-Length"),u=t?parseInt(t,10):0;if(u<1073741824)return new Uint8Array(await r.arrayBuffer());{if(!r.body)throw new Error(`failed to load external data file: ${n}, no response body.`);let a=r.body.getReader(),d;try{d=new ArrayBuffer(u)}catch(s){if(s instanceof RangeError){let m=Math.ceil(u/65536);d=new WebAssembly.Memory({initial:m,maximum:m}).buffer}else throw s}let f=0;for(;;){let{done:s,value:m}=await a.read();if(s)break;let h=m.byteLength;new Uint8Array(d,f,h).set(m),f+=h}return new Uint8Array(d,0,u)}}else return n instanceof Blob?new Uint8Array(await n.arrayBuffer()):n instanceof Uint8Array?n:new Uint8Array(n)}});var go,pa,ma,mt,yo,xt,ha,ga,er,ya,wa,ba,tr=W(()=>{"use strict";Dr();Ur();Kt();et();Mt();Fr();go=(n,r)=>{G()._OrtInit(n,r)!==0&&X("Can't initialize onnxruntime.")},pa=async n=>{go(n.wasm.numThreads,da(n.logLevel))},ma=async(n,r)=>{},mt=new Map,yo=n=>{let r=G(),t=r.stackSave();try{let u=r.stackAlloc(8);return r._OrtGetInputOutputCount(n,u,u+4)!==0&&X("Can't get session input/output count."),[r.HEAP32[u/4],r.HEAP32[u/4+1]]}finally{r.stackRestore(t)}},xt=n=>{let r=G(),t=r._malloc(n.byteLength);if(t===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${n.byteLength}.`);return r.HEAPU8.set(n,t),[t,n.byteLength]},ha=async(n,r)=>{let t,u,a=G();Array.isArray(n)?[t,u]=n:n.buffer===a.HEAPU8.buffer?[t,u]=[n.byteOffset,n.byteLength]:[t,u]=xt(n);let d=0,f=0,s=0,m=[],h=[],y=[];try{if([f,m]=Xt(r),r?.externalData&&a.mountExternalData){let L=[];for(let k of r.externalData){let $=typeof k=="string"?k:k.path;L.push(Rt(typeof k=="string"?k:k.data).then(j=>{a.mountExternalData($,j)}))}await Promise.all(L)}d=await a._OrtCreateSession(t,u,f),d===0&&X("Can't create a session.");let[O,b]=yo(d),M=!!r?.enableGraphCapture,P=[],A=[],S=[];for(let L=0;L<O;L++){let k=a._OrtGetInputName(d,L);k===0&&X("Can't get an input name."),h.push(k),P.push(a.UTF8ToString(k))}for(let L=0;L<b;L++){let k=a._OrtGetOutputName(d,L);k===0&&X("Can't get an output name."),y.push(k);let $=a.UTF8ToString(k);A.push($)}let B=null;return mt.set(d,[d,h,y,B,M,!1]),[d,P,A]}catch(O){throw h.forEach(b=>a._OrtFree(b)),y.forEach(b=>a._OrtFree(b)),s!==0&&a._OrtReleaseBinding(s),d!==0&&a._OrtReleaseSession(d),O}finally{a._free(t),f!==0&&a._OrtReleaseSessionOptions(f),m.forEach(O=>a._free(O)),a.unmountExternalData?.()}},ga=n=>{let r=G(),t=mt.get(n);if(!t)throw new Error(`cannot release session. invalid session id: ${n}`);let[u,a,d,f,s]=t;f&&(s&&r._OrtClearBoundOutputs(f.handle),r._OrtReleaseBinding(f.handle)),r.jsepOnReleaseSession?.(n),a.forEach(m=>r._OrtFree(m)),d.forEach(m=>r._OrtFree(m)),r._OrtReleaseSession(u),mt.delete(n)},er=(n,r,t,u,a,d=!1)=>{if(!n){r.push(0);return}let f=G(),s=n[0],m=n[1],h=n[3],y,O;if(s==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(d&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${a} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let P=n[2].gpuBuffer,A=Br(pt(s));O=m.reduce((B,L)=>B*L,1)*A;let S=f.jsepRegisterBuffer;if(!S)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');y=S(u,a,P,O)}else{let P=n[2];if(Array.isArray(P)){O=4*P.length,y=f._malloc(O),t.push(y);let A=y/4;for(let S=0;S<P.length;S++){if(typeof P[S]!="string")throw new TypeError(`tensor data at index ${S} is not a string`);f.HEAPU32[A++]=ee(P[S],t)}}else O=P.byteLength,y=f._malloc(O),t.push(y),f.HEAPU8.set(new Uint8Array(P.buffer,P.byteOffset,O),y)}let b=f.stackSave(),M=f.stackAlloc(4*m.length);try{let P=M/4;m.forEach(S=>f.HEAP32[P++]=S);let A=f._OrtCreateTensor(pt(s),y,O,M,m.length,Pt(h));A===0&&X(`Can't create tensor for input/output. session=${u}, index=${a}.`),r.push(A)}finally{f.stackRestore(b)}},ya=async(n,r,t,u,a,d)=>{let f=G(),s=mt.get(n);if(!s)throw new Error(`cannot run inference. invalid session id: ${n}`);let m=s[0],h=s[1],y=s[2],O=s[3],b=s[4],M=s[5],P=r.length,A=u.length,S=0,B=[],L=[],k=[],$=[],j=f.stackSave(),x=f.stackAlloc(P*4),q=f.stackAlloc(P*4),Fe=f.stackAlloc(A*4),We=f.stackAlloc(A*4);try{[S,B]=dt(d);for(let N=0;N<P;N++)er(t[N],L,$,n,r[N],b);for(let N=0;N<A;N++)er(a[N],k,$,n,P+u[N],b);let me=x/4,se=q/4,ne=Fe/4,Ce=We/4;for(let N=0;N<P;N++)f.HEAPU32[me++]=L[N],f.HEAPU32[se++]=h[r[N]];for(let N=0;N<A;N++)f.HEAPU32[ne++]=k[N],f.HEAPU32[Ce++]=y[u[N]];f.jsepOnRunStart?.(m);let _e;_e=await f._OrtRun(m,q,x,P,We,A,Fe,S),_e!==0&&X("failed to call OrtRun().");let ie=[];for(let N=0;N<A;N++){let Ee=f.HEAPU32[Fe/4+N];if(Ee===k[N]){ie.push(a[N]);continue}let Pe=f.stackSave(),de=f.stackAlloc(4*4),Re=!1,Z,ye=0;try{f._OrtGetTensorData(Ee,de,de+4,de+8,de+12)!==0&&X(`Can't access output tensor data on index ${N}.`);let xe=de/4,Se=f.HEAPU32[xe++];ye=f.HEAPU32[xe++];let Ae=f.HEAPU32[xe++],Ye=f.HEAPU32[xe++],we=[];for(let oe=0;oe<Ye;oe++)we.push(f.HEAPU32[Ae/4+oe]);f._OrtFree(Ae);let Ie=we.reduce((oe,K)=>oe*K,1);Z=Qt(Se);let ke=O?.outputPreferredLocations[u[N]];if(Z==="string"){if(ke==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let oe=[],K=ye/4;for(let pe=0;pe<Ie;pe++){let Le=f.HEAPU32[K++],De=pe===Ie-1?void 0:f.HEAPU32[K]-Le;oe.push(f.UTF8ToString(Le,De))}ie.push([Z,we,oe,"cpu"])}else if(ke==="gpu-buffer"&&Ie>0){let oe=f.jsepGetBuffer;if(!oe)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let K=oe(ye),pe=Br(Se);if(pe===void 0||!Zt(Z))throw new Error(`Unsupported data type: ${Z}`);Re=!0,ie.push([Z,we,{gpuBuffer:K,download:f.jsepCreateDownloader(K,Ie*pe,Z),dispose:()=>{f._OrtReleaseTensor(Ee)}},"gpu-buffer"])}else{let oe=Ct(Z),K=new oe(Ie);new Uint8Array(K.buffer,K.byteOffset,K.byteLength).set(f.HEAPU8.subarray(ye,ye+K.byteLength)),ie.push([Z,we,K,"cpu"])}}finally{f.stackRestore(Pe),Z==="string"&&ye&&f._free(ye),Re||f._OrtReleaseTensor(Ee)}}return O&&!b&&(f._OrtClearBoundOutputs(O.handle),mt.set(n,[m,h,y,O,b,!1])),ie}finally{f.stackRestore(j),L.forEach(me=>f._OrtReleaseTensor(me)),k.forEach(me=>f._OrtReleaseTensor(me)),$.forEach(me=>f._free(me)),S!==0&&f._OrtReleaseRunOptions(S),B.forEach(me=>f._free(me))}},wa=n=>{let r=G(),t=mt.get(n);if(!t)throw new Error("invalid session id");let u=t[0],a=r._OrtEndProfiling(u);a===0&&X("Can't get an profile file name."),r._OrtFree(a)},ba=n=>{let r=[];for(let t of n){let u=t[2];!Array.isArray(u)&&"buffer"in u&&r.push(u.buffer)}return r}});var Oa=ft((Gs,bo)=>{bo.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,d)=>()=>(u&&(d=u(u=0)),d);var tt=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Tt=(u,d)=>{for(var a in d)Et(u,a,{get:d[a],enumerable:!0})},Zr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let f of Xr(d))!Qr.call(u,f)&&f!==a&&Et(u,f,{get:()=>d[f],enumerable:!(h=Jr(d,f))||h.enumerable});return u};var rt=u=>Zr(Et({},"__esModule",{value:!0}),u);var At={};Tt(At,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};Tt(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=tt((mr,Ft)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var a=d,h,f;a.ready=new Promise((t,o)=>{h=t,f=o});var w=Object.assign({},a),g="./this.program",s=typeof window=="object",S=typeof importScripts=="function",U=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",R="",D,x,ee;if(U){var B=(Mt(),rt(At)),I=(Dt(),rt(Ct));R=S?I.dirname(R)+"/":__dirname+"/",D=(t,o)=>(t=ve(t)?new URL(t):I.normalize(t),B.readFileSync(t,o?void 0:"utf8")),ee=t=>(t=D(t,!0),t.buffer||(t=new Uint8Array(t)),t),x=(t,o,i,c=!0)=>{t=ve(t)?new URL(t):I.normalize(t),B.readFile(t,c?void 0:"utf8",(O,E)=>{O?i(O):o(c?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(s||S)&&(S?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),u&&(R=u),R.indexOf("blob:")!==0?R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):R="",D=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},S&&(ee=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),x=(t,o,i)=>{var c=new XMLHttpRequest;c.open("GET",t,!0),c.responseType="arraybuffer",c.onload=()=>{c.status==200||c.status==0&&c.response?o(c.response):i()},c.onerror=i,c.send(null)});var v=console.log.bind(console),k=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&F("no native wasm support detected");var W,H=!1,ie,te,T,z,Ce;function Ue(){var t=W.buffer;a.HEAP8=ie=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=te=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=T=new Int32Array(t),a.HEAPU32=z=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Ce=new Float64Array(t)}var ce=[],ne=[],Q=[],Oe=0,he=null,ae=null;function F(t){throw t="Aborted("+t+")",k(t),H=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var ye=t=>t.startsWith("data:application/octet-stream;base64,"),ve=t=>t.startsWith("file://"),fe;if(fe="ort-training-wasm-simd.wasm",!ye(fe)){var _e=fe;fe=a.locateFile?a.locateFile(_e,R):R+_e}function j(t){if(ee)return ee(t);throw"both async and sync fetching of the wasm failed"}function pe(t){if(s||S){if(typeof fetch=="function"&&!ve(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+t+"\'";return o.arrayBuffer()}).catch(()=>j(t));if(x)return new Promise((o,i)=>{x(t,c=>o(new Uint8Array(c)),i)})}return Promise.resolve().then(()=>j(t))}function Be(t,o,i){return pe(t).then(c=>WebAssembly.instantiate(c,o)).then(c=>c).then(i,c=>{k(`failed to asynchronously prepare wasm: ${c}`),F(c)})}function Ee(t,o){var i=fe;return typeof WebAssembly.instantiateStreaming!="function"||ye(i)||ve(i)||U||typeof fetch!="function"?Be(i,t,o):fetch(i,{credentials:"same-origin"}).then(c=>WebAssembly.instantiateStreaming(c,t).then(o,function(O){return k(`wasm streaming compile failed: ${O}`),k("falling back to ArrayBuffer instantiation"),Be(i,t,o)}))}var be,we={862704:(t,o,i,c)=>{if(typeof a>"u"||!a.Qa)return 1;if(t=Y(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.Qa.get(t),!t)return 2;if(o>>>=0,i>>>=0,o+i>t.byteLength)return 3;try{return te.set(t.subarray(o,o+i),c>>>0>>>0),0}catch{return 4}}};function Ie(t){this.Ka=t-24,this.Pa=function(o){z[this.Ka+4>>>2>>>0]=o},this.Oa=function(o){z[this.Ka+8>>>2>>>0]=o},this.Ma=function(o,i){this.Na(),this.Pa(o),this.Oa(i)},this.Na=function(){z[this.Ka+16>>>2>>>0]=0}}var me=0,Se=0,De=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,i)=>{o>>>=0;var c=o+i;for(i=o;t[i]&&!(i>=c);)++i;if(16<i-o&&t.buffer&&De)return De.decode(t.subarray(o,i));for(c="";o<i;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)c+=String.fromCharCode((O&31)<<6|E);else{var P=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|P:(O&7)<<18|E<<12|P<<6|t[o++]&63,65536>O?c+=String.fromCharCode(O):(O-=65536,c+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else c+=String.fromCharCode(O)}return c},Y=(t,o)=>(t>>>=0)?re(te,t,o):"",le=t=>{for(var o=0,i=0;i<t.length;++i){var c=t.charCodeAt(i);127>=c?o++:2047>=c?o+=2:55296<=c&&57343>=c?(o+=4,++i):o+=3}return o},Fe=(t,o,i,c)=>{if(i>>>=0,!(0<c))return 0;var O=i;c=i+c-1;for(var E=0;E<t.length;++E){var P=t.charCodeAt(E);if(55296<=P&&57343>=P){var Z=t.charCodeAt(++E);P=65536+((P&1023)<<10)|Z&1023}if(127>=P){if(i>=c)break;o[i++>>>0]=P}else{if(2047>=P){if(i+1>=c)break;o[i++>>>0]=192|P>>6}else{if(65535>=P){if(i+2>=c)break;o[i++>>>0]=224|P>>12}else{if(i+3>=c)break;o[i++>>>0]=240|P>>18,o[i++>>>0]=128|P>>12&63}o[i++>>>0]=128|P>>6&63}o[i++>>>0]=128|P&63}}return o[i>>>0]=0,i-O},Te=t=>t%4===0&&(t%100!==0||t%400===0),qe=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],Pe=t=>{var o=le(t)+1,i=it(o);return i&&Fe(t,te,i,o),i},Ne=[],Re={},He=()=>{if(!Ge){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Re)Re[o]===void 0?delete t[o]:t[o]=Re[o];var i=[];for(o in t)i.push(`${o}=${t[o]}`);Ge=i}return Ge},Ge,Le=[null,[],[]],Ve=[31,29,31,30,31,30,31,31,30,31,30,31],Je=[31,28,31,30,31,30,31,31,30,31,30,31];function $e(t){var o=Array(le(t)+1);return Fe(t,o,0,o.length),o}function ot(t,o,i,c){function O(p,L,$){for(p=typeof p=="number"?p.toString():p||"";p.length<L;)p=$[0]+p;return p}function E(p,L){return O(p,L,"0")}function P(p,L){function $(et){return 0>et?-1:0<et?1:0}var Ae;return(Ae=$(p.getFullYear()-L.getFullYear()))===0&&(Ae=$(p.getMonth()-L.getMonth()))===0&&(Ae=$(p.getDate()-L.getDate())),Ae}function Z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function de(p){var L=p.Ga;for(p=new Date(new Date(p.Ha+1900,0,1).getTime());0<L;){var $=p.getMonth(),Ae=(Te(p.getFullYear())?Ve:Je)[$];if(L>Ae-p.getDate())L-=Ae-p.getDate()+1,p.setDate(1),11>$?p.setMonth($+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+L);break}}return $=new Date(p.getFullYear()+1,0,4),L=Z(new Date(p.getFullYear(),0,4)),$=Z($),0>=P(L,p)?0>=P($,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}t>>>=0,o>>>=0,i>>>=0,c>>>=0;var se=z[c+40>>>2>>>0];c={Ta:T[c>>>2>>>0],Sa:T[c+4>>>2>>>0],Ia:T[c+8>>>2>>>0],La:T[c+12>>>2>>>0],Ja:T[c+16>>>2>>>0],Ha:T[c+20>>>2>>>0],Ba:T[c+24>>>2>>>0],Ga:T[c+28>>>2>>>0],Va:T[c+32>>>2>>>0],Ra:T[c+36>>>2>>>0],Ua:se?Y(se):""},i=Y(i),se={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ue in se)i=i.replace(new RegExp(ue,"g"),se[ue]);var Ze="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ke="January February March April May June July August September October November December".split(" ");se={"%a":p=>Ze[p.Ba].substring(0,3),"%A":p=>Ze[p.Ba],"%b":p=>Ke[p.Ja].substring(0,3),"%B":p=>Ke[p.Ja],"%C":p=>E((p.Ha+1900)/100|0,2),"%d":p=>E(p.La,2),"%e":p=>O(p.La,2," "),"%g":p=>de(p).toString().substring(2),"%G":p=>de(p),"%H":p=>E(p.Ia,2),"%I":p=>(p=p.Ia,p==0?p=12:12<p&&(p-=12),E(p,2)),"%j":p=>{for(var L=0,$=0;$<=p.Ja-1;L+=(Te(p.Ha+1900)?Ve:Je)[$++]);return E(p.La+L,3)},"%m":p=>E(p.Ja+1,2),"%M":p=>E(p.Sa,2),"%n":()=>`\n`,"%p":p=>0<=p.Ia&&12>p.Ia?"AM":"PM","%S":p=>E(p.Ta,2),"%t":()=>"	","%u":p=>p.Ba||7,"%U":p=>E(Math.floor((p.Ga+7-p.Ba)/7),2),"%V":p=>{var L=Math.floor((p.Ga+7-(p.Ba+6)%7)/7);if(2>=(p.Ba+371-p.Ga-2)%7&&L++,L)L==53&&($=(p.Ba+371-p.Ga)%7,$==4||$==3&&Te(p.Ha)||(L=1));else{L=52;var $=(p.Ba+7-p.Ga-1)%7;($==4||$==5&&Te(p.Ha%400-1))&&L++}return E(L,2)},"%w":p=>p.Ba,"%W":p=>E(Math.floor((p.Ga+7-(p.Ba+6)%7)/7),2),"%y":p=>(p.Ha+1900).toString().substring(2),"%Y":p=>p.Ha+1900,"%z":p=>{p=p.Ra;var L=0<=p;return p=Math.abs(p)/60,(L?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.Ua,"%%":()=>"%"},i=i.replace(/%%/g,"\\0\\0");for(ue in se)i.includes(ue)&&(i=i.replace(new RegExp(ue,"g"),se[ue](c)));return i=i.replace(/\\0\\0/g,"%"),ue=$e(i),ue.length>o?0:(ie.set(ue,t>>>0),ue.length-1)}var G={a:function(t,o,i){throw t>>>=0,new Ie(t).Ma(o>>>0,i>>>0),me=t,Se++,me},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),T[i>>>2>>>0]=t.getUTCSeconds(),T[i+4>>>2>>>0]=t.getUTCMinutes(),T[i+8>>>2>>>0]=t.getUTCHours(),T[i+12>>>2>>>0]=t.getUTCDate(),T[i+16>>>2>>>0]=t.getUTCMonth(),T[i+20>>>2>>>0]=t.getUTCFullYear()-1900,T[i+24>>>2>>>0]=t.getUTCDay(),T[i+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,i){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,i>>>=0,t=new Date(1e3*t),T[i>>>2>>>0]=t.getSeconds(),T[i+4>>>2>>>0]=t.getMinutes(),T[i+8>>>2>>>0]=t.getHours(),T[i+12>>>2>>>0]=t.getDate(),T[i+16>>>2>>>0]=t.getMonth(),T[i+20>>>2>>>0]=t.getFullYear()-1900,T[i+24>>>2>>>0]=t.getDay(),T[i+28>>>2>>>0]=(Te(t.getFullYear())?qe:at)[t.getMonth()]+t.getDate()-1|0,T[i+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var c=new Date(t.getFullYear(),0,1).getTimezoneOffset();T[i+32>>>2>>>0]=(o!=c&&t.getTimezoneOffset()==Math.min(c,o))|0},p:function(t){t>>>=0;var o=new Date(T[t+20>>>2>>>0]+1900,T[t+16>>>2>>>0],T[t+12>>>2>>>0],T[t+8>>>2>>>0],T[t+4>>>2>>>0],T[t>>>2>>>0],0),i=T[t+32>>>2>>>0],c=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),P=Math.min(E,O);return 0>i?T[t+32>>>2>>>0]=+(O!=E&&P==c):0<i!=(P==c)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<i?P:O)-c))),T[t+24>>>2>>>0]=o.getDay(),T[t+28>>>2>>>0]=(Te(o.getFullYear())?qe:at)[o.getMonth()]+o.getDate()-1|0,T[t>>>2>>>0]=o.getSeconds(),T[t+4>>>2>>>0]=o.getMinutes(),T[t+8>>>2>>>0]=o.getHours(),T[t+12>>>2>>>0]=o.getDate(),T[t+16>>>2>>>0]=o.getMonth(),T[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),isNaN(t)?(T[ze()>>>2>>>0]=61,t=-1):t/=1e3,Xe((be=t,1<=+Math.abs(be)?0<be?+Math.floor(be/4294967296)>>>0:~~+Math.ceil((be-+(~~be>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,i){function c(de){return(de=de.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?de[1]:"GMT"}i>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),P=new Date(O,6,1);O=E.getTimezoneOffset();var Z=P.getTimezoneOffset();z[t>>>0>>>2>>>0]=60*Math.max(O,Z),T[o>>>0>>>2>>>0]=+(O!=Z),t=c(E),o=c(P),t=Pe(t),o=Pe(o),Z<O?(z[i>>>2>>>0]=t,z[i+4>>>2>>>0]=o):(z[i>>>2>>>0]=o,z[i+4>>>2>>>0]=t)},d:()=>{F("")},B:function(t,o,i){t>>>=0,o>>>=0,i>>>=0,Ne.length=0;for(var c;c=te[o++>>>0];){var O=c!=105;O&=c!=112,i+=O&&i%8?4:0,Ne.push(c==112?z[i>>>2>>>0]:c==105?T[i>>>2>>>0]:Ce[i>>>3>>>0]),i+=O?8:4}return we[t].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(t,o,i){return o>>>=0,te.copyWithin(t>>>0>>>0,o>>>0,o+(i>>>0)>>>0)},s:function(t){t>>>=0;var o=te.length;if(4294901760<t)return!1;for(var i=1;4>=i;i*=2){var c=o*(1+.2/i);c=Math.min(c,t+100663296);var O=Math;c=Math.max(t,c);e:{O=(O.min.call(O,4294901760,c+(65536-c%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),Ue();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var i=0;return He().forEach((c,O)=>{var E=o+i;for(O=z[t+4*O>>>2>>>0]=E,E=0;E<c.length;++E)ie[O++>>>0>>>0]=c.charCodeAt(E);ie[O>>>0>>>0]=0,i+=c.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var i=He();z[t>>>2>>>0]=i.length;var c=0;return i.forEach(O=>c+=O.length+1),z[o>>>2>>>0]=c,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,i,c){o>>>=0,i>>>=0,c>>>=0;for(var O=0,E=0;E<i;E++){var P=z[o>>>2>>>0],Z=z[o+4>>>2>>>0];o+=8;for(var de=0;de<Z;de++){var se=te[P+de>>>0],ue=Le[t];se===0||se===10?((t===1?v:k)(re(ue,0)),ue.length=0):ue.push(se)}O+=Z}return z[c>>>2>>>0]=O,0},r:ot,c:function(t,o,i,c){return ot(t>>>0,o>>>0,i>>>0,c>>>0)}},A=function(){function t(i){return A=i.exports,A=ut(),W=A.K,Ue(),ne.unshift(A.L),Oe--,Oe==0&&(he!==null&&(clearInterval(he),he=null),ae&&(i=ae,ae=null,i())),A}var o={a:G};if(Oe++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(i){k(`Module.instantiateWasm callback failed with error: ${i}`),f(i)}return Ee(o,function(i){t(i.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=A.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=A.N)(t,o),a._OrtCreateSessionOptions=(t,o,i,c,O,E,P,Z,de,se)=>(a._OrtCreateSessionOptions=A.O)(t,o,i,c,O,E,P,Z,de,se),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=A.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,i)=>(a._OrtAddFreeDimensionOverride=A.Q)(t,o,i),a._OrtAddSessionConfigEntry=(t,o,i)=>(a._OrtAddSessionConfigEntry=A.R)(t,o,i),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=A.S)(t),a._OrtCreateSession=(t,o,i)=>(a._OrtCreateSession=A.T)(t,o,i),a._OrtReleaseSession=t=>(a._OrtReleaseSession=A.U)(t),a._OrtGetInputOutputCount=(t,o,i)=>(a._OrtGetInputOutputCount=A.V)(t,o,i),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=A.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=A.X)(t,o),a._OrtFree=t=>(a._OrtFree=A.Y)(t),a._OrtCreateTensor=(t,o,i,c,O,E)=>(a._OrtCreateTensor=A.Z)(t,o,i,c,O,E),a._OrtGetTensorData=(t,o,i,c,O)=>(a._OrtGetTensorData=A._)(t,o,i,c,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=A.$)(t),a._OrtCreateRunOptions=(t,o,i,c)=>(a._OrtCreateRunOptions=A.aa)(t,o,i,c),a._OrtAddRunConfigEntry=(t,o,i)=>(a._OrtAddRunConfigEntry=A.ba)(t,o,i),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=A.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=A.da)(t),a._OrtBindInput=(t,o,i)=>(a._OrtBindInput=A.ea)(t,o,i),a._OrtBindOutput=(t,o,i,c)=>(a._OrtBindOutput=A.fa)(t,o,i,c),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=A.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=A.ha)(t),a._OrtRunWithBinding=(t,o,i,c,O)=>(a._OrtRunWithBinding=A.ia)(t,o,i,c,O),a._OrtRun=(t,o,i,c,O,E,P,Z)=>(a._OrtRun=A.ja)(t,o,i,c,O,E,P,Z),a._OrtEndProfiling=t=>(a._OrtEndProfiling=A.ka)(t),a._OrtTrainingLoadCheckpoint=(t,o)=>(a._OrtTrainingLoadCheckpoint=A.la)(t,o),a._OrtTrainingReleaseCheckpoint=t=>(a._OrtTrainingReleaseCheckpoint=A.ma)(t),a._OrtTrainingCreateSession=(t,o,i,c,O,E,P,Z)=>(a._OrtTrainingCreateSession=A.na)(t,o,i,c,O,E,P,Z),a._OrtTrainingLazyResetGrad=t=>(a._OrtTrainingLazyResetGrad=A.oa)(t),a._OrtTrainingRunTrainStep=(t,o,i,c,O,E)=>(a._OrtTrainingRunTrainStep=A.pa)(t,o,i,c,O,E),a._OrtTrainingOptimizerStep=(t,o)=>(a._OrtTrainingOptimizerStep=A.qa)(t,o),a._OrtTrainingEvalStep=(t,o,i,c,O,E)=>(a._OrtTrainingEvalStep=A.ra)(t,o,i,c,O,E),a._OrtTrainingGetParametersSize=(t,o,i)=>(a._OrtTrainingGetParametersSize=A.sa)(t,o,i),a._OrtTrainingCopyParametersToBuffer=(t,o,i,c)=>(a._OrtTrainingCopyParametersToBuffer=A.ta)(t,o,i,c),a._OrtTrainingCopyParametersFromBuffer=(t,o,i,c)=>(a._OrtTrainingCopyParametersFromBuffer=A.ua)(t,o,i,c),a._OrtTrainingGetModelInputOutputCount=(t,o,i,c)=>(a._OrtTrainingGetModelInputOutputCount=A.va)(t,o,i,c),a._OrtTrainingGetModelInputOutputName=(t,o,i,c)=>(a._OrtTrainingGetModelInputOutputName=A.wa)(t,o,i,c),a._OrtTrainingReleaseSession=t=>(a._OrtTrainingReleaseSession=A.xa)(t);var ze=()=>(ze=A.ya)(),it=a._malloc=t=>(it=a._malloc=A.za)(t);a._free=t=>(a._free=A.Aa)(t);var Xe=t=>(Xe=A.Ca)(t),st=()=>(st=A.Da)(),C=t=>(C=A.Ea)(t),ke=t=>(ke=A.Fa)(t);function ut(){var t=A;t=Object.assign({},t);var o=c=>()=>c()>>>0,i=c=>O=>c(O)>>>0;return t.ya=o(t.ya),t.za=i(t.za),t.Da=o(t.Da),t.Fa=i(t.Fa),t}a.stackAlloc=ke,a.stackSave=st,a.stackRestore=C,a.UTF8ToString=Y,a.stringToUTF8=(t,o,i)=>Fe(t,te,o,i),a.lengthBytesUTF8=le;var xe;ae=function t(){xe||Qe(),xe||(ae=t)};function Qe(){if(!(0<Oe)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();ce.unshift(t)}for(;0<ce.length;)ce.shift()(a);if(!(0<Oe||xe||(xe=!0,a.calledRun=!0,H))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<Q.length;)Q.shift()(a)}}}return Qe(),d.ready}})();typeof mr=="object"&&typeof Ft=="object"?Ft.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=tt(()=>{});var yr=tt(()=>{});var br={};Tt(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=tt((vr,Pt)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function a(){return Q.buffer!=F.buffer&&j(),F}function h(){return Q.buffer!=F.buffer&&j(),ye}function f(){return Q.buffer!=F.buffer&&j(),ve}function w(){return Q.buffer!=F.buffer&&j(),fe}function g(){return Q.buffer!=F.buffer&&j(),_e}var s=d,S,U;s.ready=new Promise((e,r)=>{S=e,U=r});var R=Object.assign({},s),D="./this.program",x=(e,r)=>{throw r},ee=typeof window=="object",B=typeof importScripts=="function",I=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",v=s.ENVIRONMENT_IS_PTHREAD||!1,k="";function W(e){return s.locateFile?s.locateFile(e,k):k+e}var H,ie,te;if(I){var T=(Mt(),rt(At)),z=(Dt(),rt(Ct));k=B?z.dirname(k)+"/":__dirname+"/",H=(r,n)=>(r=Y(r)?new URL(r):z.normalize(r),T.readFileSync(r,n?void 0:"utf8")),te=r=>(r=H(r,!0),r.buffer||(r=new Uint8Array(r)),r),ie=(r,n,l,y=!0)=>{r=Y(r)?new URL(r):z.normalize(r),T.readFile(r,y?void 0:"utf8",(b,_)=>{b?l(b):n(y?_.buffer:_)})},!s.thisProgram&&1<process.argv.length&&(D=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),x=(r,n)=>{throw process.exitCode=r,n},s.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(r){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),r}global.Worker=e.Worker}else(ee||B)&&(B?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),typeof u<"u"&&u&&(k=u),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",I||(H=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(te=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),ie=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));I&&typeof performance>"u"&&(global.performance=yr().performance);var Ce=console.log.bind(console),Ue=console.error.bind(console);I&&(Ce=(...e)=>T.writeSync(1,e.join(" ")+`\n`),Ue=(...e)=>T.writeSync(2,e.join(" ")+`\n`));var ce=Ce,ne=Ue;Object.assign(s,R),R=null,typeof WebAssembly!="object"&&De("no native wasm support detected");var Q,Oe,he=!1,ae,F,ye,ve,fe,_e;function j(){var e=Q.buffer;s.HEAP8=F=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=ye=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ve=new Int32Array(e),s.HEAPU32=fe=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=_e=new Float64Array(e)}var pe=16777216;if(v)Q=s.wasmMemory;else if(s.wasmMemory)Q=s.wasmMemory;else if(Q=new WebAssembly.Memory({initial:pe/65536,maximum:65536,shared:!0}),!(Q.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),I&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");j(),pe=Q.buffer.byteLength;var Be=[],Ee=[],be=[],we=0,Ie=null,me=null;function Se(){if(we--,we==0&&(Ie!==null&&(clearInterval(Ie),Ie=null),me)){var e=me;me=null,e()}}function De(e){throw e="Aborted("+e+")",ne(e),he=!0,ae=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),U(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),Y=e=>e.startsWith("file://"),le;le="ort-wasm-threaded.wasm",re(le)||(le=W(le));function Fe(e){if(te)return te(e);throw"both async and sync fetching of the wasm failed"}function Te(e){if(ee||B){if(typeof fetch=="function"&&!Y(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw"failed to load wasm binary file at \'"+e+"\'";return r.arrayBuffer()}).catch(()=>Fe(e));if(ie)return new Promise((r,n)=>{ie(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Fe(e))}function qe(e,r,n){return Te(e).then(l=>WebAssembly.instantiate(l,r)).then(l=>l).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),De(l)})}function at(e,r){var n=le;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||Y(n)||I||typeof fetch!="function"?qe(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),qe(n,e,r)}))}var Pe,Ne={793116:(e,r,n,l)=>{if(typeof s>"u"||!s.cb)return 1;if(e=$e(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.cb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function Re(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},Ge=e=>{C.Pa.length==0&&(Xe(),C.Ya(C.Pa[0]));var r=C.Pa.pop();if(!r)return 6;C.Qa.push(r),C.Ma[e.Oa]=r,r.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return I&&r.unref(),r.postMessage(n,e.qb),0},Le=0,Ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Je=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&Ve)return Ve.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var _=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|_:(y&7)<<18|b<<12|_<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},$e=(e,r)=>(e>>>=0)?Je(h(),e,r):"",ot=e=>{var r=vt();return e=e(),ct(r),e};function G(e,r){var n=arguments.length-2,l=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,_=0;_<n;_++){var J=l[2+_];g()[b+_>>>0]=J}return ar(e,n,y,r)})}function A(e){if(v)return G(0,1,e);ae=e,0<Le||(C.lb(),s.onExit?.(e),he=!0),x(e,new Re(e))}var ze=e=>{if(ae=e,v)throw ut(e),"unwind";A(e)};function it(){for(var e=s.numThreads;e--;)Xe();Be.unshift(()=>{we++,st(()=>Se())})}function Xe(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),C.Pa.push(e)}function st(e){v?e():Promise.all(C.Pa.map(C.Ya)).then(e)}var C={Pa:[],Qa:[],bb:[],Ma:{},Wa(){v?(C.receiveObjectTransfer=C.jb,C.threadInitTLS=C.ab,C.setExitStatus=C.$a):it()},$a:e=>ae=e,tb:["$terminateWorker"],lb:()=>{for(var e of C.Qa)He(e);for(e of C.Pa)He(e);C.Pa=[],C.Qa=[],C.Ma=[]},Za:e=>{var r=e.Oa;delete C.Ma[r],C.Pa.push(e),C.Qa.splice(C.Qa.indexOf(e),1),e.Oa=0,wt(r)},jb(){},ab(){C.bb.forEach(e=>e())},Ya:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var _=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var J=C.Ma[b.targetThread];J?J.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${_}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else _==="checkMailbox"?ft():_==="spawnThread"?Ge(b):_==="cleanupThread"?C.Za(C.Ma[b.thread]):_==="killThread"?(b=b.thread,_=C.Ma[b],delete C.Ma[b],He(_),wt(b),C.Qa.splice(C.Qa.indexOf(_),1),_.Oa=0):_==="cancelThread"?C.Ma[b.thread].postMessage({cmd:"cancel"}):_==="loaded"?(e.loaded=!0,I&&!e.Oa&&e.unref(),r(e)):_==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):_==="callHandler"?s[b.handler](...b.args):_&&ne(`worker sent an unknown command ${_}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},I&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||u,wasmMemory:Q,wasmModule:Oe})})};s.PThread=C;var ke=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=lt(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],sr(r,r-e),ct(r)};function ut(e){if(v)return G(1,0,e);ze(e)}var xe=[],Qe;s.invokeEntryPoint=(e,r)=>{var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=Qe.get(e)),e=n(r),0<Le?C.$a(e):Ot(e)};function t(e){this.Va=e-24,this.gb=function(r){w()[this.Va+4>>>2>>>0]=r},this.fb=function(r){w()[this.Va+8>>>2>>>0]=r},this.Wa=function(r,n){this.eb(),this.gb(r),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,i=0;function c(e,r,n,l){return v?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return v&&y.length===0?c(e,r,n,l):(e={kb:n,Oa:e,hb:l,qb:y},v?(e.sb="spawnThread",postMessage(e,y),0):Ge(e))}function E(e,r,n){return v?G(3,1,e,r,n):0}function P(e,r){if(v)return G(4,1,e,r)}var Z=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},de=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var _=e.charCodeAt(b);if(55296<=_&&57343>=_){var J=e.charCodeAt(++b);_=65536+((_&1023)<<10)|J&1023}if(127>=_){if(n>=l)break;r[n++>>>0]=_}else{if(2047>=_){if(n+1>=l)break;r[n++>>>0]=192|_>>6}else{if(65535>=_){if(n+2>=l)break;r[n++>>>0]=224|_>>12}else{if(n+3>=l)break;r[n++>>>0]=240|_>>18,r[n++>>>0]=128|_>>12&63}r[n++>>>0]=128|_>>6&63}r[n++>>>0]=128|_&63}}return r[n>>>0]=0,n-y},se=(e,r,n)=>de(e,h(),r,n);function ue(e,r){if(v)return G(5,1,e,r)}function Ze(e,r,n){if(v)return G(6,1,e,r,n)}function Ke(e,r,n){return v?G(7,1,e,r,n):0}function p(e,r){if(v)return G(8,1,e,r)}function L(e,r,n){if(v)return G(9,1,e,r,n)}function $(e,r,n,l){if(v)return G(10,1,e,r,n,l)}function Ae(e,r,n,l){if(v)return G(11,1,e,r,n,l)}function et(e,r,n,l){if(v)return G(12,1,e,r,n,l)}function Lt(e){if(v)return G(13,1,e)}function kt(e,r){if(v)return G(14,1,e,r)}function Wt(e,r,n){if(v)return G(15,1,e,r,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(f(),e>>>2,e).value.then(ft),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!he))try{if(e(),!(0<Le))try{v?Ot(ae):ze(ae)}catch(r){r instanceof Re||r=="unwind"||x(1,r)}}catch(r){r instanceof Re||r=="unwind"||x(1,r)}};s.checkMailbox=ft;var gt=[],je=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function Gt(e,r,n,l,y,b,_,J){return v?G(16,1,e,r,n,l,y,b,_,J):-52}function $t(e,r,n,l,y,b,_){if(v)return G(17,1,e,r,n,l,y,b,_)}var zt=e=>{var r=Z(e)+1,n=rr(r);return n&&se(e,n,r),n},ht=[],yt={},jt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:D||"./this.program"},r;for(r in yt)yt[r]===void 0?delete e[r]:e[r]=yt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);bt=n}return bt},bt;function Yt(e,r){if(v)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0>>>0]=l.charCodeAt(b);a()[y>>>0>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(v)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return v?G(20,1,e):52}function Jt(e,r,n,l){return v?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return v?G(22,1,e,r,n,l,y):70}var $r=[null,[],[]];function Qt(e,r,n,l){if(v)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var _=w()[r>>>2>>>0],J=w()[r+4>>>2>>>0];r+=8;for(var Me=0;Me<J;Me++){var oe=h()[_+Me>>>0],ge=$r[e];oe===0||oe===10?((e===1?ce:ne)(Je(ge,0)),ge.length=0):ge.push(oe)}y+=J}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function zr(e){var r=Array(Z(e)+1);return de(e,r,0,r.length),r}var jr=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(m,N,X){for(m=typeof m=="number"?m.toString():m||"";m.length<N;)m=X[0]+m;return m}function b(m,N){return y(m,N,"0")}function _(m,N){function X(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=X(m.getFullYear()-N.getFullYear()))===0&&(We=X(m.getMonth()-N.getMonth()))===0&&(We=X(m.getDate()-N.getDate())),We}function J(m){switch(m.getDay()){case 0:return new Date(m.getFullYear()-1,11,29);case 1:return m;case 2:return new Date(m.getFullYear(),0,3);case 3:return new Date(m.getFullYear(),0,2);case 4:return new Date(m.getFullYear(),0,1);case 5:return new Date(m.getFullYear()-1,11,31);case 6:return new Date(m.getFullYear()-1,11,30)}}function Me(m){var N=m.Ra;for(m=new Date(new Date(m.Sa+1900,0,1).getTime());0<N;){var X=m.getMonth(),We=(je(m.getFullYear())?Zt:Kt)[X];if(N>We-m.getDate())N-=We-m.getDate()+1,m.setDate(1),11>X?m.setMonth(X+1):(m.setMonth(0),m.setFullYear(m.getFullYear()+1));else{m.setDate(m.getDate()+N);break}}return X=new Date(m.getFullYear()+1,0,4),N=J(new Date(m.getFullYear(),0,4)),X=J(X),0>=_(N,m)?0>=_(X,m)?m.getFullYear()+1:m.getFullYear():m.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var oe=w()[l+40>>>2>>>0];l={ob:f()[l>>>2>>>0],nb:f()[l+4>>>2>>>0],Ta:f()[l+8>>>2>>>0],Xa:f()[l+12>>>2>>>0],Ua:f()[l+16>>>2>>>0],Sa:f()[l+20>>>2>>>0],Na:f()[l+24>>>2>>>0],Ra:f()[l+28>>>2>>>0],ub:f()[l+32>>>2>>>0],mb:f()[l+36>>>2>>>0],pb:oe?$e(oe):""},n=$e(n),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ge in oe)n=n.replace(new RegExp(ge,"g"),oe[ge]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");oe={"%a":m=>fr[m.Na].substring(0,3),"%A":m=>fr[m.Na],"%b":m=>lr[m.Ua].substring(0,3),"%B":m=>lr[m.Ua],"%C":m=>b((m.Sa+1900)/100|0,2),"%d":m=>b(m.Xa,2),"%e":m=>y(m.Xa,2," "),"%g":m=>Me(m).toString().substring(2),"%G":m=>Me(m),"%H":m=>b(m.Ta,2),"%I":m=>(m=m.Ta,m==0?m=12:12<m&&(m-=12),b(m,2)),"%j":m=>{for(var N=0,X=0;X<=m.Ua-1;N+=(je(m.Sa+1900)?Zt:Kt)[X++]);return b(m.Xa+N,3)},"%m":m=>b(m.Ua+1,2),"%M":m=>b(m.nb,2),"%n":()=>`\n`,"%p":m=>0<=m.Ta&&12>m.Ta?"AM":"PM","%S":m=>b(m.ob,2),"%t":()=>"	","%u":m=>m.Na||7,"%U":m=>b(Math.floor((m.Ra+7-m.Na)/7),2),"%V":m=>{var N=Math.floor((m.Ra+7-(m.Na+6)%7)/7);if(2>=(m.Na+371-m.Ra-2)%7&&N++,N)N==53&&(X=(m.Na+371-m.Ra)%7,X==4||X==3&&je(m.Sa)||(N=1));else{N=52;var X=(m.Na+7-m.Ra-1)%7;(X==4||X==5&&je(m.Sa%400-1))&&N++}return b(N,2)},"%w":m=>m.Na,"%W":m=>b(Math.floor((m.Ra+7-(m.Na+6)%7)/7),2),"%y":m=>(m.Sa+1900).toString().substring(2),"%Y":m=>m.Sa+1900,"%z":m=>{m=m.mb;var N=0<=m;return m=Math.abs(m)/60,(N?"+":"-")+("0000"+(m/60*100+m%60)).slice(-4)},"%Z":m=>m.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(ge in oe)n.includes(ge)&&(n=n.replace(new RegExp(ge,"g"),oe[ge](l)));return n=n.replace(/\\0\\0/g,"%"),ge=zr(n),ge.length>r?0:(jr(ge,e),ge.length-1)}C.Wa();var Yr=[A,ut,c,E,P,ue,Ze,Ke,p,L,$,Ae,et,Lt,kt,Wt,Gt,$t,Yt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,r,n){throw e>>>=0,new t(e).Wa(r>>>0,n>>>0),o=e,i++,o},L:function(e){nr(e>>>0,!B,1,!ee,131072,!1),C.ab()},j:function(e){e>>>=0,v?postMessage({cmd:"cleanupThread",thread:e}):C.Za(C.Ma[e])},H:O,h:E,S:P,D:ue,F:Ze,T:Ke,Q:p,J:L,P:$,n:Ae,E:et,B:Lt,R:kt,C:Wt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(()=>ft()):v?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=C.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l){r>>>=0,gt.length=n,l=l>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[l+y>>>0];return e=0>e?Ne[-e-1]:Yr[e],C.ib=r,r=e.apply(null,gt),C.ib=0,r},K:mt,o:function(e){I&&C.Ma[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=(je(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),_=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&_==l):0<n!=(_==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?_:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=(je(r.getFullYear())?Nt:Ht)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),isNaN(e)?(f()[tr()>>>2>>>0]=61,e=-1):e/=1e3,ir((Pe=e,1<=+Math.abs(Pe)?0<Pe?+Math.floor(Pe/4294967296)>>>0:~~+Math.ceil((Pe-+(~~Pe>>>0))/4294967296)>>>0:0)),e>>>0},q:Gt,r:$t,y:function(e,r,n){function l(oe){return(oe=oe.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?oe[1]:"GMT"}e>>>=0,r>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),_=new Date(y,6,1);y=b.getTimezoneOffset();var J=_.getTimezoneOffset(),Me=Math.max(y,J);w()[e>>>2>>>0]=60*Me,f()[r>>>2>>>0]=+(y!=J),e=l(b),r=l(_),e=zt(e),r=zt(r),J<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=r):(w()[n>>>2>>>0]=r,w()[n+4>>>2>>>0]=e)},c:()=>{De("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,ht.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,ht.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>I?(wr(),rt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-Q.buffer.byteLength+65535)/65536;try{Q.grow(y),j();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:Yt,N:qt,G:ze,g:Vt,m:Jt,v:Xt,l:Qt,a:Q||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},M=function(){function e(n,l){return M=n.exports,M=Vr(),C.bb.push(M.za),Qe=M.Aa,Ee.unshift(M.V),Oe=l,Se(),M}var r={a:qr};if(we++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),U(n)}return at(r,function(n){e(n.instance,n.module)}).catch(U),{}}();s._OrtInit=(e,r)=>(s._OrtInit=M.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=M.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,_,J,Me,oe)=>(s._OrtCreateSessionOptions=M.Y)(e,r,n,l,y,b,_,J,Me,oe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=M.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=M._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=M.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=M.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=M.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=M.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=M.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=M.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=M.fa)(e,r),s._OrtFree=e=>(s._OrtFree=M.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=M.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=M.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=M.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=M.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=M.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=M.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=M.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=M.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=M.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=M.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=M.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=M.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,_,J)=>(s._OrtRun=M.ta)(e,r,n,l,y,b,_,J),s._OrtEndProfiling=e=>(s._OrtEndProfiling=M.ua)(e);var tr=()=>(tr=M.va)(),lt=s._pthread_self=()=>(lt=s._pthread_self=M.wa)(),rr=s._malloc=e=>(rr=s._malloc=M.xa)(e);s._free=e=>(s._free=M.ya)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=M.za)();var nr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(nr=s.__emscripten_thread_init=M.Ba)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=M.Ca)();var ar=(e,r,n,l)=>(ar=M.Da)(e,r,n,l),wt=e=>(wt=M.Ea)(e),Ot=s.__emscripten_thread_exit=e=>(Ot=s.__emscripten_thread_exit=M.Fa)(e),or=()=>(or=M.Ga)(),ir=e=>(ir=M.Ha)(e),sr=(e,r)=>(sr=M.Ia)(e,r),vt=()=>(vt=M.Ja)(),ct=e=>(ct=M.Ka)(e),_t=e=>(_t=M.La)(e);function Vr(){var e=M;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=r(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=r(e.Ja),e.La=n(e.La),e}s.wasmMemory=Q,s.stackAlloc=_t,s.stackSave=vt,s.stackRestore=ct,s.keepRuntimeAlive=()=>0<Le,s.UTF8ToString=$e,s.stringToUTF8=se,s.lengthBytesUTF8=Z,s.ExitStatus=Re,s.PThread=C;var dt;me=function e(){dt||ur(),dt||(me=e)};function ur(){if(!(0<we))if(v)S(s),v||ke(Ee),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Be.unshift(s.preRun.shift());ke(Be),0<we||dt||(dt=!0,s.calledRun=!0,he||(v||ke(Ee),S(s),v||ke(be)))}}return ur(),d.ready}})();typeof vr=="object"&&typeof Pt=="object"?Pt.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=tt((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=gr();var an=_r(),xt,Ut=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,d)=>u?"ort-training-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ar=async u=>{if(Ut)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,f=on(a),w=h&&sn(),g=u.wasmPaths,s=typeof g=="string"?g:void 0,S=un(w,f),U=typeof g=="object"?g[S]:void 0,R=!1,D=[];if(d>0&&D.push(new Promise(x=>{setTimeout(()=>{R=!0,x()},d)})),D.push(new Promise((x,ee)=>{let B=f?an:Tr,I={locateFile:(v,k)=>f&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):v.endsWith(".wasm")?U||(s??k)+S:k+v};if(f)if(I.numThreads=a,typeof Blob>"u")I.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${B.toString()};`;I.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}B(I).then(v=>{pt=!1,Ut=!0,xt=v,x()},v=>{pt=!1,Sr=!0,ee(v)})})),await Promise.race(D),R)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},K=()=>{if(Ut&&xt)return xt;throw new Error("WebAssembly is not initialized yet.")};var q=(u,d)=>{let a=K(),h=a.lengthBytesUTF8(u)+1,f=a._malloc(h);return a.stringToUTF8(u,f,h),d.push(f),f},nt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([f,w])=>{let g=d?d+f:f;if(typeof w=="object")nt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let d=K(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let f=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Mr=u=>{let d=K(),a=0,h=[],f=u||{};try{if(u?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(f.terminate=!1);let w=0;return u?.tag!==void 0&&(w=q(u.tag,h)),a=d._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&nt(u.extra,"",new WeakSet,(g,s)=>{let S=q(g,h),U=q(s,h);d._OrtAddRunConfigEntry(a,S,U)!==0&&V(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,d,a)=>{for(let h of d){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=q("deviceType",a),S=q(g.deviceType,a);K()._OrtAddSessionConfigEntry(u,s,S)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=q("numThreads",a),U=q(s.toString(),a);K()._OrtAddSessionConfigEntry(u,S,U)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=q("powerPreference",a),S=q(g.powerPreference,a);K()._OrtAddSessionConfigEntry(u,s,S)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=q("preferredLayout",a),S=q(g.preferredLayout,a);K()._OrtAddSessionConfigEntry(u,s,S)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=q(f,a);K()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${f}.`)}},Cr=u=>{let d=K(),a=0,h=[],f=u||{};cn(f);try{let w=fn(f.graphOptimizationLevel??"all"),g=ln(f.executionMode??"sequential"),s=typeof f.logId=="string"?q(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let U=f.logVerbosityLevel??0;if(!Number.isInteger(U)||U<0||U>4)throw new Error(`log verbosity level is not valid: ${U}`);let R=typeof f.optimizedModelFilePath=="string"?q(f.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,U,R),a===0&&V("Can\'t create session options."),f.executionProviders&&dn(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let D=q("enableGraphCapture",h),x=q(f.enableGraphCapture.toString(),h);d._OrtAddSessionConfigEntry(a,D,x)!==0&&V(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[D,x]of Object.entries(f.freeDimensionOverrides)){if(typeof D!="string")throw new Error(`free dimension override name must be a string: ${D}`);if(typeof x!="number"||!Number.isInteger(x)||x<0)throw new Error(`free dimension override value must be a non-negative integer: ${x}`);let ee=q(D,h);d._OrtAddFreeDimensionOverride(a,ee,x)!==0&&V(`Can\'t set a free dimension override: ${D} - ${x}.`)}return f.extra!==void 0&&nt(f.extra,"",new WeakSet,(D,x)=>{let ee=q(D,h),B=q(x,h);d._OrtAddSessionConfigEntry(a,ee,B)!==0&&V(`Can\'t set a session config entry: ${D} - ${x}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},Bt=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],Fr=u=>{switch(u){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Pr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},xr=u=>u==="float32"||u==="float16"||u==="int32"||u==="int64"||u==="uint32"||u==="uint8"||u==="bool",Ur=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let f=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let U=S.byteLength;new Uint8Array(w,g,U).set(S),g+=U}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,d)=>{K()._OrtInit(u,d)!==0&&V("Can\'t initialize onnxruntime.")},Ir=async u=>{pn(u.wasm.numThreads,Pr(u.logLevel))},Lr=async(u,d)=>{},Ye=new Map,mn=u=>{let d=K(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},It=u=>{let d=K(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},kr=async(u,d)=>{let a,h,f=K();Array.isArray(u)?[a,h]=u:u.buffer===f.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=It(u);let w=0,g=0,s=0,S=[],U=[],R=[];try{if([g,S]=Cr(d),d?.externalData&&f.mountExternalData){let W=[];for(let H of d.externalData){let ie=typeof H=="string"?H:H.path;W.push(Rr(typeof H=="string"?H:H.data).then(te=>{f.mountExternalData(ie,te)}))}await Promise.all(W)}w=await f._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[D,x]=mn(w),ee=!!d?.enableGraphCapture,B=[],I=[],v=[];for(let W=0;W<D;W++){let H=f._OrtGetInputName(w,W);H===0&&V("Can\'t get an input name."),U.push(H),B.push(f.UTF8ToString(H))}for(let W=0;W<x;W++){let H=f._OrtGetOutputName(w,W);H===0&&V("Can\'t get an output name."),R.push(H);let ie=f.UTF8ToString(H);I.push(ie)}let k=null;return Ye.set(w,[w,U,R,k,ee,!1]),[w,B,I]}catch(D){throw U.forEach(x=>f._OrtFree(x)),R.forEach(x=>f._OrtFree(x)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),D}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(D=>f._free(D)),f.unmountExternalData?.()}},Wr=u=>{let d=K(),a=Ye.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,f,w,g,s]=a;g&&(s&&d._OrtClearBoundOutputs(g.handle),d._OrtReleaseBinding(g.handle)),d.jsepOnReleaseSession?.(u),f.forEach(S=>d._OrtFree(S)),w.forEach(S=>d._OrtFree(S)),d._OrtReleaseSession(h),Ye.delete(u)},Br=(u,d,a,h,f,w=!1)=>{if(!u){d.push(0);return}let g=K(),s=u[0],S=u[1],U=u[3],R,D;if(s==="string"&&U==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&U!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(U==="gpu-buffer"){let B=u[2].gpuBuffer,I=Bt(Rt(s));D=S.reduce((k,W)=>k*W,1)*I;let v=g.jsepRegisterBuffer;if(!v)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');R=v(h,f,B,D)}else{let B=u[2];if(Array.isArray(B)){D=4*B.length,R=g._malloc(D),a.push(R);let I=R/4;for(let v=0;v<B.length;v++){if(typeof B[v]!="string")throw new TypeError(`tensor data at index ${v} is not a string`);g.HEAPU32[I++]=q(B[v],a)}}else D=B.byteLength,R=g._malloc(D),a.push(R),g.HEAPU8.set(new Uint8Array(B.buffer,B.byteOffset,D),R)}let x=g.stackSave(),ee=g.stackAlloc(4*S.length);try{let B=ee/4;S.forEach(v=>g.HEAP32[B++]=v);let I=g._OrtCreateTensor(Rt(s),R,D,ee,S.length,Ur(U));I===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),d.push(I)}finally{g.stackRestore(x)}},Nr=async(u,d,a,h,f,w)=>{let g=K(),s=Ye.get(u);if(!s)throw new Error(`cannot run inference. invalid session id: ${u}`);let S=s[0],U=s[1],R=s[2],D=s[3],x=s[4],ee=s[5],B=d.length,I=h.length,v=0,k=[],W=[],H=[],ie=[],te=g.stackSave(),T=g.stackAlloc(B*4),z=g.stackAlloc(B*4),Ce=g.stackAlloc(I*4),Ue=g.stackAlloc(I*4);try{[v,k]=Mr(w);for(let F=0;F<B;F++)Br(a[F],W,ie,u,d[F],x);for(let F=0;F<I;F++)Br(f[F],H,ie,u,B+h[F],x);let ce=T/4,ne=z/4,Q=Ce/4,Oe=Ue/4;for(let F=0;F<B;F++)g.HEAPU32[ce++]=W[F],g.HEAPU32[ne++]=U[d[F]];for(let F=0;F<I;F++)g.HEAPU32[Q++]=H[F],g.HEAPU32[Oe++]=R[h[F]];g.jsepOnRunStart?.(S);let he;he=await g._OrtRun(S,z,T,B,Ue,I,Ce,v),he!==0&&V("failed to call OrtRun().");let ae=[];for(let F=0;F<I;F++){let ye=g.HEAPU32[Ce/4+F];if(ye===H[F]){ae.push(f[F]);continue}let ve=g.stackSave(),fe=g.stackAlloc(4*4),_e=!1,j,pe=0;try{g._OrtGetTensorData(ye,fe,fe+4,fe+8,fe+12)!==0&&V(`Can\'t access output tensor data on index ${F}.`);let Ee=fe/4,be=g.HEAPU32[Ee++];pe=g.HEAPU32[Ee++];let we=g.HEAPU32[Ee++],Ie=g.HEAPU32[Ee++],me=[];for(let re=0;re<Ie;re++)me.push(g.HEAPU32[we/4+re]);g._OrtFree(we);let Se=me.reduce((re,Y)=>re*Y,1);j=Dr(be);let De=D?.outputPreferredLocations[h[F]];if(j==="string"){if(De==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let re=[],Y=pe/4;for(let le=0;le<Se;le++){let Fe=g.HEAPU32[Y++],Te=le===Se-1?void 0:g.HEAPU32[Y]-Fe;re.push(g.UTF8ToString(Fe,Te))}ae.push([j,me,re,"cpu"])}else if(De==="gpu-buffer"&&Se>0){let re=g.jsepGetBuffer;if(!re)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let Y=re(pe),le=Bt(be);if(le===void 0||!xr(j))throw new Error(`Unsupported data type: ${j}`);_e=!0,ae.push([j,me,{gpuBuffer:Y,download:g.jsepCreateDownloader(Y,Se*le,j),dispose:()=>{g._OrtReleaseTensor(ye)}},"gpu-buffer"])}else{let re=Fr(j),Y=new re(Se);new Uint8Array(Y.buffer,Y.byteOffset,Y.byteLength).set(g.HEAPU8.subarray(pe,pe+Y.byteLength)),ae.push([j,me,Y,"cpu"])}}finally{g.stackRestore(ve),j==="string"&&pe&&g._free(pe),_e||g._OrtReleaseTensor(ye)}}return D&&!x&&(g._OrtClearBoundOutputs(D.handle),Ye.set(u,[S,U,R,D,x,!1])),ae}finally{g.stackRestore(te),W.forEach(ce=>g._OrtReleaseTensor(ce)),H.forEach(ce=>g._OrtReleaseTensor(ce)),ie.forEach(ce=>g._free(ce)),v!==0&&g._OrtReleaseRunOptions(v),k.forEach(ce=>g._free(ce))}},Hr=u=>{let d=K(),a=Ye.get(u);if(!a)throw new Error("invalid session id");let h=a[0],f=d._OrtEndProfiling(h);f===0&&V("Can\'t get an profile file name."),d._OrtFree(f)},Gr=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Ar(a.wasm).then(()=>{Ir(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Lr(f,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=a,f=It(h);postMessage({type:d,out:f});break}case"create":{let{model:h,options:f}=a;kr(h,f).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":Wr(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;Nr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(U=>U[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:S},Gr([...w,...S]))},S=>{postMessage({type:d,err:S})});break}case"end-profiling":Hr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'});var tt,Te,It,nr,ar,kr,Lr,ht,gt,Oo,rr,va,Ta,_a,Ea,Sa,Aa,Ma,Nr=W(()=>{"use strict";Ke();tr();et();tt=()=>!!Y.wasm.proxy&&typeof document<"u",It=!1,nr=!1,ar=!1,Lr=new Map,ht=(n,r)=>{let t=Lr.get(n);t?t.push(r):Lr.set(n,[r])},gt=()=>{if(It||!nr||ar||!Te)throw new Error("worker not ready")},Oo=n=>{switch(n.data.type){case"init-wasm":It=!1,n.data.err?(ar=!0,kr[1](n.data.err)):(nr=!0,kr[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let r=Lr.get(n.data.type);n.data.err?r.shift()[1](n.data.err):r.shift()[0](n.data.out);break}default:}},rr=typeof document<"u"?document?.currentScript?.src:void 0,va=async()=>{if(!nr){if(It)throw new Error("multiple calls to 'initWasm()' detected.");if(ar)throw new Error("previous call to 'initWasm()' failed.");if(It=!0,tt())return Y.wasm.wasmPaths===void 0&&rr&&rr.indexOf("blob:")!==0&&(Y.wasm.wasmPaths=rr.substr(0,+rr.lastIndexOf("/")+1)),new Promise((n,r)=>{Te?.terminate();let t=URL.createObjectURL(new Blob([Oa()],{type:"text/javascript"}));Te=new Worker(t,{name:"ort-wasm-proxy-worker"}),Te.onerror=a=>r(a),Te.onmessage=Oo,URL.revokeObjectURL(t),kr=[n,r];let u={type:"init-wasm",in:Y};Te.postMessage(u)});try{await ca(Y.wasm),await pa(Y),nr=!0}catch(n){throw ar=!0,n}finally{It=!1}}},Ta=async n=>{if(tt())return gt(),new Promise((r,t)=>{ht("init-ep",[r,t]);let u={type:"init-ep",in:{epName:n,env:Y}};Te.postMessage(u)});await ma(Y,n)},_a=async n=>tt()?(gt(),new Promise((r,t)=>{ht("copy-from",[r,t]);let u={type:"copy-from",in:{buffer:n}};Te.postMessage(u,[n.buffer])})):xt(n),Ea=async(n,r)=>{if(tt()){if(r?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return gt(),new Promise((t,u)=>{ht("create",[t,u]);let a={type:"create",in:{model:n,options:{...r}}},d=[];n instanceof Uint8Array&&d.push(n.buffer),Te.postMessage(a,d)})}else return ha(n,r)},Sa=async n=>{if(tt())return gt(),new Promise((r,t)=>{ht("release",[r,t]);let u={type:"release",in:n};Te.postMessage(u)});ga(n)},Aa=async(n,r,t,u,a,d)=>{if(tt()){if(t.some(f=>f[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(a.some(f=>f))throw new Error("pre-allocated output tensor is not supported for proxy.");return gt(),new Promise((f,s)=>{ht("run",[f,s]);let m=t,h={type:"run",in:{sessionId:n,inputIndices:r,inputs:m,outputIndices:u,options:d}};Te.postMessage(h,ba(m))})}else return ya(n,r,t,u,a,d)},Ma=async n=>{if(tt())return gt(),new Promise((r,t)=>{ht("end-profiling",[r,t]);let u={type:"end-profiling",in:n};Te.postMessage(u)});wa(n)}});var rt,sr,or,Hr=W(()=>{"use strict";Ke();Nr();Kt();Fr();rt=(n,r)=>{switch(n.location){case"cpu":return[n.type,n.dims,n.data,"cpu"];case"gpu-buffer":return[n.type,n.dims,{gpuBuffer:n.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${n.location} for ${r()}`)}},sr=n=>{switch(n[3]){case"cpu":return new ce(n[0],n[2],n[1]);case"gpu-buffer":{let r=n[0];if(!Zt(r))throw new Error(`not supported data type: ${r} for deserializing GPU tensor`);let{gpuBuffer:t,download:u,dispose:a}=n[2];return ce.fromGpuBuffer(t,{dataType:r,dims:n[1],download:u,dispose:a})}default:throw new Error(`invalid data location: ${n[3]}`)}},or=class{async fetchModelAndCopyToWasmMemory(r){return _a(await Rt(r))}async loadModel(r,t){$e();let u;typeof r=="string"?typeof process<"u"&&process.versions&&process.versions.node?u=await Rt(r):u=await this.fetchModelAndCopyToWasmMemory(r):u=r,[this.sessionId,this.inputNames,this.outputNames]=await Ea(u,t),ze()}async dispose(){return Sa(this.sessionId)}async run(r,t,u){$e();let a=[],d=[];Object.entries(r).forEach(b=>{let M=b[0],P=b[1],A=this.inputNames.indexOf(M);if(A===-1)throw new Error(`invalid input '${M}'`);a.push(P),d.push(A)});let f=[],s=[];Object.entries(t).forEach(b=>{let M=b[0],P=b[1],A=this.outputNames.indexOf(M);if(A===-1)throw new Error(`invalid output '${M}'`);f.push(P),s.push(A)});let m=a.map((b,M)=>rt(b,()=>`input "${this.inputNames[d[M]]}"`)),h=f.map((b,M)=>b?rt(b,()=>`output "${this.outputNames[s[M]]}"`):null),y=await Aa(this.sessionId,d,m,s,h,u),O={};for(let b=0;b<y.length;b++)O[this.outputNames[s[b]]]=f[b]??sr(y[b]);return ze(),O}startProfiling(){}endProfiling(){Ma(this.sessionId)}}});var vo,ir,Ca=W(()=>{"use strict";Ke();Nr();Hr();vo=()=>{if((typeof Y.wasm.initTimeout!="number"||Y.wasm.initTimeout<0)&&(Y.wasm.initTimeout=0),typeof Y.wasm.simd!="boolean"&&(Y.wasm.simd=!0),typeof Y.wasm.proxy!="boolean"&&(Y.wasm.proxy=!1),typeof Y.wasm.trace!="boolean"&&(Y.wasm.trace=!1),typeof Y.wasm.numThreads!="number"||!Number.isInteger(Y.wasm.numThreads)||Y.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Y.wasm.numThreads=1);let n=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Y.wasm.numThreads=Math.min(4,Math.ceil((n||1)/2))}},ir=class{async init(r){vo(),await va(),await Ta(r)}async createInferenceSessionHandler(r,t){let u=new or;return await u.loadModel(r,t),Promise.resolve(u)}}});var Me,Oe,Ra,To,Pa,Wr,xa,ur,Ia,Da,Ua,Ba,Fa,Gr,ka,La,Na,Ha=W(()=>{"use strict";Dr();Ur();Kt();tr();et();Mt();Me="Built without training API's enabled. Use the onnxruntime-web/training import for training functionality, and make sure that all the correct artifacts are built & moved to the correct folder if using a custom build. Check https://onnxruntime.ai/docs/build/web.html for more information.",Oe=(n,r,t=!0)=>{t&&n!==0?X(r):!t&&n===0&&X(r)},Ra=n=>{let r=G(),[t,u]=n,a=0;try{if(r._OrtTrainingLoadCheckpoint)a=r._OrtTrainingLoadCheckpoint(t,u);else throw new Error(Me);return Oe(a,"Error occurred when trying to create a CheckpointState",!1),a}catch(d){throw r._OrtTrainingReleaseCheckpoint&&a!==0&&r._OrtTrainingReleaseCheckpoint(a),d}finally{r._OrtFree(n[0])}},To=(n,r)=>{let t=G(),u=t.stackSave();try{let a=t.stackAlloc(8);if(t._OrtTrainingGetModelInputOutputCount){let d=t._OrtTrainingGetModelInputOutputCount(n,a,a+4,r);return Oe(d,"Can't get session input/output count."),[t.HEAP32[a/4],t.HEAP32[a/4+1]]}else throw new Error(Me)}finally{t.stackRestore(u)}},Pa=(n,r,t,u)=>{let a=[],d=G();for(let f=0;f<r;f++)if(d._OrtTrainingGetModelInputOutputName){let s=d._OrtTrainingGetModelInputOutputName(n,f,t,u);Oe(s,`Can't get input or output name -- is input: ${t}, index ${f}`,!1),a.push(d.UTF8ToString(s)),d._free(s)}else throw new Error(Me);return a},Wr=(n,r)=>{let t=[],u=[],[a,d]=To(n,r);return t=Pa(n,a,!0,r),u=Pa(n,d,!1,r),[t,u]},xa=(n,r,t,u,a)=>{let d=G(),f=0,s=0,m=[];try{if([s,m]=Xt(a),d._OrtTrainingCreateSession)f=d._OrtTrainingCreateSession(s,n,r[0],r[1],t[0],t[1],u[0],u[1]);else throw new Error(Me);return Oe(f,"Error occurred when trying to create a TrainingSession",!1),f}catch(h){throw d._OrtTrainingReleaseSession&&f!==0&&d._OrtTrainingReleaseSession(f),h}finally{d._free(r[0]),d._free(t[0]),d._free(u[0]),s!==0&&d._OrtReleaseSessionOptions(s),m.forEach(h=>d._free(h))}},ur=(n,r,t,u,a,d)=>{let f=r.length;for(let y=0;y<f;y++)er(t[y],u,a,n,d+r[y]);let s=G(),m=s.stackAlloc(f*4),h=m/4;for(let y=0;y<f;y++)s.HEAPU32[h++]=u[y];return m},Ia=(n,r,t,u)=>{let a=G(),d=[];for(let f=0;f<r;f++){let s=a.HEAPU32[n/4+f];if(s===t[f]){d.push(u[f]);continue}let m=a.stackSave(),h=a.stackAlloc(4*4),y,O=0;try{let b=a._OrtGetTensorData(s,h,h+4,h+8,h+12);Oe(b,`Can't access output tensor data on index ${f}.`);let M=h/4,P=a.HEAPU32[M++];O=a.HEAPU32[M++];let A=a.HEAPU32[M++],S=a.HEAPU32[M++],B=[];for(let k=0;k<S;k++)B.push(a.HEAPU32[A/4+k]);a._OrtFree(A);let L=B.reduce((k,$)=>k*$,1);if(y=Qt(P),y==="string"){let k=[],$=O/4;for(let j=0;j<L;j++){let x=a.HEAPU32[$++],q=j===L-1?void 0:a.HEAPU32[$]-x;k.push(a.UTF8ToString(x,q))}d.push([y,B,k,"cpu"])}else{let k=Ct(y),$=new k(L);new Uint8Array($.buffer,$.byteOffset,$.byteLength).set(a.HEAPU8.subarray(O,O+$.byteLength)),d.push([y,B,$,"cpu"])}}finally{a.stackRestore(m),y==="string"&&O&&a._free(O),a._OrtReleaseTensor(s)}}return d},Da=async n=>{let r=G();if(r._OrtTrainingLazyResetGrad){let t=r._OrtTrainingLazyResetGrad(n);Oe(t,"Can't call lazyResetGrad.")}else throw new Error(Me)},Ua=async(n,r,t,u,a,d)=>{let f=G(),s=r.length,m=u.length,h=0,y=[],O=[],b=[],M=[],P=f.stackSave();try{[h,y]=dt(d);let A=ur(n,r,t,O,M,0),S=ur(n,u,a,b,M,s);if(f._OrtTrainingRunTrainStep){let B=f._OrtTrainingRunTrainStep(n,A,s,S,m,h);Oe(B,"failed to call OrtTrainingRunTrainStep in the WebAssembly layer")}else throw new Error(Me);return Ia(S,m,b,a)}finally{f.stackRestore(P),O.forEach(A=>f._OrtReleaseTensor(A)),b.forEach(A=>f._OrtReleaseTensor(A)),M.forEach(A=>f._free(A)),h!==0&&f._OrtReleaseRunOptions(h),y.forEach(A=>f._free(A))}},Ba=async(n,r)=>{let t=G(),u=0,a=[];try{if([u,a]=dt(r),t._OrtTrainingOptimizerStep){let d=t._OrtTrainingOptimizerStep(n,u);Oe(d,"Failed to call OrtTrainingOptimizerStep in the WebAssembly layer")}else throw new Error(Me)}finally{u!==0&&t._OrtReleaseRunOptions(u),a.forEach(d=>t._free(d))}},Fa=async(n,r,t,u,a,d)=>{let f=G(),s=r.length,m=u.length,h=0,y=[],O=[],b=[],M=[],P=f.stackSave();try{[h,y]=dt(d);let A=ur(n,r,t,O,M,0),S=ur(n,u,a,b,M,s);if(f._OrtTrainingEvalStep){let B=f._OrtTrainingEvalStep(n,A,s,S,m,h);Oe(B,"failed to call OrtTrainingEvalStep in the WebAssembly layer")}else throw new Error(Me);return Ia(S,m,b,a)}finally{f.stackRestore(P),O.forEach(A=>f._OrtReleaseTensor(A)),b.forEach(A=>f._OrtReleaseTensor(A)),M.forEach(A=>f._free(A)),h!==0&&f._OrtReleaseRunOptions(h),y.forEach(A=>f._free(A))}},Gr=(n,r)=>{let t=G(),u=t.stackSave();try{let a=t.stackAlloc(4);if(t._OrtTrainingGetParametersSize){let d=t._OrtTrainingGetParametersSize(n,a,r);return Oe(d,"Can't get parameters size"),t.HEAP32[a/4]}else throw new Error(Me)}finally{t.stackRestore(u)}},ka=async(n,r)=>{let t=G(),u=t.stackSave(),a="float32",d="cpu",f=Gr(n,r),s=0,m=4*f,h=t._malloc(m),y=[f],O=t.stackAlloc(4),b=O/4;t.HEAP32[b]=f;try{if(s=t._OrtCreateTensor(pt(a),h,m,O,y.length,Pt(d)),Oe(s,`Can't create tensor for getContiguousParameters. session=${n}.`,!1),t._OrtTrainingCopyParametersToBuffer){let S=t._OrtTrainingCopyParametersToBuffer(n,s,f,r);Oe(S,"Can't get contiguous parameters.")}else throw new Error(Me);let M=Ct(a),P=new M(f),A=[];if(new Uint8Array(P.buffer,P.byteOffset,P.byteLength).set(t.HEAPU8.subarray(h,h+m)),A.push([a,y,P,d]),A.length!==1)throw new Error(`something unexpected happened in the getContiguousParameters function. Expected output length of
     one, got ${A.length}`);return A[0]}finally{s!==0&&t._OrtReleaseTensor(s),t._free(h),t._free(O),t.stackRestore(u)}},La=async(n,r,t)=>{let u=G(),a=u.stackSave(),d="float32",f="cpu",s=r.length,m=s/4,h=u._malloc(s);u.HEAPU8.set(r,h);let y=u.stackAlloc(4);u.HEAP32[y/4]=m;let O=1,b=0;try{if(b=u._OrtCreateTensor(pt(d),h,s,y,O,Pt(f)),Oe(b,`Can't create tensor for input/output. session=${n}`,!1),u._OrtTrainingCopyParametersFromBuffer){let M=u._OrtTrainingCopyParametersFromBuffer(n,b,m,t);Oe(M,"Can't copy buffer to parameters.")}else throw new Error(Me)}finally{b!==0&&u._OrtReleaseTensor(b),u.stackRestore(a),u._free(h),u._free(y)}},Na=(n,r)=>{let t=G();t._OrtTrainingReleaseSession&&t._OrtTrainingReleaseSession(r),t._OrtTrainingReleaseCheckpoint&&t._OrtTrainingReleaseCheckpoint(n)}});var fr,Wa=W(()=>{"use strict";Hr();tr();Ha();fr=class{constructor(){this.evalInputNames=[];this.evalOutputNames=[]}async uriOrBufferToHeap(r){let t;if(typeof r=="string"){let a=await(await fetch(r)).arrayBuffer();t=new Uint8Array(a)}else t=r;return xt(t)}async createTrainingSession(r,t,u,a,d){let f=await this.uriOrBufferToHeap(r),s=await this.uriOrBufferToHeap(t),m=[0,0],h=[0,0];u!==""&&(m=await this.uriOrBufferToHeap(u)),a!==""&&(h=await this.uriOrBufferToHeap(a)),this.checkpointId=Ra(f),this.sessionId=xa(this.checkpointId,s,m,h,d),[this.inputNames,this.outputNames]=Wr(this.sessionId,!1),u!==""&&([this.evalInputNames,this.evalOutputNames]=Wr(this.sessionId,!0))}convertMapIntoValuesArrayAndIndicesArray(r,t,u){let a=[],d=[];Object.entries(r).forEach(s=>{let m=s[0],h=s[1],y=t.indexOf(m);if(y===-1)throw new Error(`invalid input '${m}`);a.push(h),d.push(y)});let f=a.map(u);return[a,d,f]}convertTensorMetadataToReturnType(r,t,u){let a={};for(let d=0;d<r.length;d++)a[this.outputNames[u[d]]]=t[d]??sr(r[d]);return a}async lazyResetGrad(){await Da(this.sessionId)}async runTrainStep(r,t,u){let[,a,d]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.inputNames,(y,O)=>rt(y,()=>`input "${this.inputNames[a[O]]}"`)),[f,s,m]=this.convertMapIntoValuesArrayAndIndicesArray(t,this.outputNames,(y,O)=>y?rt(y,()=>`output "${this.outputNames[s[O]]}"`):null),h=await Ua(this.sessionId,a,d,s,m,u);return this.convertTensorMetadataToReturnType(h,f,s)}async runOptimizerStep(r){await Ba(this.sessionId,r)}async runEvalStep(r,t,u){let[,a,d]=this.convertMapIntoValuesArrayAndIndicesArray(r,this.evalInputNames,(y,O)=>rt(y,()=>`input "${this.evalInputNames[a[O]]}"`)),[f,s,m]=this.convertMapIntoValuesArrayAndIndicesArray(t,this.evalOutputNames,(y,O)=>y?rt(y,()=>`output "${this.evalOutputNames[s[O]]}"`):null),h=await Fa(this.sessionId,a,d,s,m,u);return this.convertTensorMetadataToReturnType(h,f,s)}async getParametersSize(r){return Gr(this.sessionId,r)}async loadParametersBuffer(r,t){await La(this.sessionId,r,t)}async getContiguousParameters(r){let t=await ka(this.sessionId,r);return sr(t)}async dispose(){return Na(this.checkpointId,this.sessionId)}}});var Ga={};lt(Ga,{wasmBackend:()=>_o});var $r,_o,$a=W(()=>{"use strict";Ca();Wa();$r=class extends ir{async createTrainingSessionHandler(r,t,u,a,d){let f=new fr;return await f.createTrainingSession(r,t,u,a,d),Promise.resolve(f)}},_o=new $r});var So={};lt(So,{InferenceSession:()=>Wn,TRACE:()=>Tr,TRACE_FUNC_BEGIN:()=>$e,TRACE_FUNC_END:()=>ze,Tensor:()=>ce,TrainingSession:()=>qn,default:()=>Eo,env:()=>Y,registerBackend:()=>ct});Ke();Ke();Ke();var Xn="1.18.0";var Eo=Er;{let n=($a(),Xe(Ga)).wasmBackend;ct("cpu",n,10),ct("wasm",n,10)}Object.defineProperty(Y.versions,"web",{value:Xn,enumerable:!0});return Xe(So);})();
//# sourceMappingURL=ort.training.wasm.min.js.map
